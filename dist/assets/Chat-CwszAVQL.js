import{g as B,p as k,c as s,a as b,n as C,b as E,d as G,u as J,s as V,e as f,f as te,m as K,h as P,r as O,i as ae,w as I,o as W,j as le,k as oe,t as L,l as se,q as ne,v as ue,x as Y,y as R,z as g,A as ie,B as re,C as ce,D as A,E as de,F as q,G as ve,H as me,T as F,I as fe,J as $,K as ge,L as he,M as ye}from"./index-BN2Uu5Tc.js";import{u as Q,g as be,a as _e}from"./ssrBoot-Bxby9pek.js";import{u as w,m as U,a as N,b as pe,c as Se,d as Te,e as Ve,f as ke,g as xe,h as Be,V as Ce,i as M,j as we,k as He,_ as X,l as Pe,n as Ie}from"./_plugin-vue_export-helper-B5FP-4nx.js";import{u as Re,m as Ae,c as Ee,a as Ne,b as Le,i as Me,d as De,e as Ue}from"./imClient-BeeRUWdN.js";import{V as ze,a as D,b as Z}from"./VRow-D-1N7VL_.js";const qe=k({text:String,...N(),...U()},"VToolbarTitle"),Fe=B()({name:"VToolbarTitle",props:qe(),setup(e,r){let{slots:t}=r;return w(()=>{const n=!!(t.default||t.text||e.text);return s(e.tag,{class:E(["v-toolbar-title",e.class]),style:C(e.style)},{default:()=>{var l;return[n&&b("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(l=t.default)==null?void 0:l.call(t)])]}})}),{}}}),$e=[null,"prominent","default","comfortable","compact"],ee=k({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>$e.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Be(),...N(),...xe(),...ke(),...U({tag:"header"}),...K()},"VToolbar"),j=B()({name:"VToolbar",props:ee(),setup(e,r){var p;let{slots:t}=r;const{backgroundColorClasses:n,backgroundColorStyles:l}=pe(()=>e.color),{borderClasses:a}=Se(e),{elevationClasses:i}=Te(e),{roundedClasses:u}=Ve(e),{themeClasses:m}=G(e),{rtlClasses:h}=J(),d=V(e.extended===null?!!((p=t.extension)!=null&&p.call(t)):e.extended),v=f(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),_=f(()=>d.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return te({VBtn:{variant:"text"}}),w(()=>{var H;const c=!!(e.title||t.title),y=!!(t.image||e.image),T=(H=t.extension)==null?void 0:H.call(t);return d.value=e.extended===null?!!T:e.extended,s(e.tag,{class:E(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},n.value,a.value,i.value,u.value,m.value,h.value,e.class]),style:C([l.value,e.style])},{default:()=>[y&&b("div",{key:"image",class:"v-toolbar__image"},[t.image?s(M,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):s(Ce,{key:"image-img",cover:!0,src:e.image},null)]),s(M,{defaults:{VTabs:{height:P(v.value)}}},{default:()=>{var o,S,x;return[b("div",{class:"v-toolbar__content",style:{height:P(v.value)}},[t.prepend&&b("div",{class:"v-toolbar__prepend"},[(o=t.prepend)==null?void 0:o.call(t)]),c&&s(Fe,{key:"title",text:e.title},{text:t.title}),(S=t.default)==null?void 0:S.call(t),t.append&&b("div",{class:"v-toolbar__append"},[(x=t.append)==null?void 0:x.call(t)])])]}}),s(M,{defaults:{VTabs:{height:P(_.value)}}},{default:()=>[s(we,null,{default:()=>[d.value&&b("div",{class:"v-toolbar__extension",style:{height:P(_.value)}},[T])]})]})]})}),{contentHeight:v,extensionHeight:_}}}),je=k({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ge(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=r;let n=0,l=0;const a=O(null),i=V(0),u=V(0),m=V(0),h=V(!1),d=V(!1),v=f(()=>Number(e.scrollThreshold)),_=f(()=>ae((v.value-i.value)/v.value||0)),p=()=>{const c=a.value;if(!c||t&&!t.value)return;n=i.value,i.value="window"in c?c.pageYOffset:c.scrollTop;const y=c instanceof Window?document.documentElement.scrollHeight:c.scrollHeight;if(l!==y){l=y;return}d.value=i.value<n,m.value=Math.abs(i.value-v.value)};return I(d,()=>{u.value=u.value||i.value}),I(h,()=>{u.value=0}),W(()=>{I(()=>e.scrollTarget,c=>{var T;const y=c?document.querySelector(c):window;y&&y!==a.value&&((T=a.value)==null||T.removeEventListener("scroll",p),a.value=y,a.value.addEventListener("scroll",p,{passive:!0}))},{immediate:!0})}),le(()=>{var c;(c=a.value)==null||c.removeEventListener("scroll",p)}),t&&I(t,p,{immediate:!0}),{scrollThreshold:v,currentScroll:i,currentThreshold:m,isScrollActive:h,scrollRatio:_,isScrollingUp:d,savedScroll:u}}const Je=k({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...ee(),...Ae(),...je(),height:{type:[Number,String],default:64}},"VAppBar"),Ke=B()({name:"VAppBar",props:Je(),emits:{"update:modelValue":e=>!0},setup(e,r){let{slots:t}=r;const n=O(),l=oe(e,"modelValue"),a=f(()=>{var S;const o=new Set(((S=e.scrollBehavior)==null?void 0:S.split(" "))??[]);return{hide:o.has("hide"),fullyHide:o.has("fully-hide"),inverted:o.has("inverted"),collapse:o.has("collapse"),elevate:o.has("elevate"),fadeImage:o.has("fade-image")}}),i=f(()=>{const o=a.value;return o.hide||o.fullyHide||o.inverted||o.collapse||o.elevate||o.fadeImage||!l.value}),{currentScroll:u,scrollThreshold:m,isScrollingUp:h,scrollRatio:d}=Ge(e,{canScroll:i}),v=L(()=>a.value.hide||a.value.fullyHide),_=f(()=>e.collapse||a.value.collapse&&(a.value.inverted?d.value>0:d.value===0)),p=f(()=>e.flat||a.value.fullyHide&&!l.value||a.value.elevate&&(a.value.inverted?u.value>0:u.value===0)),c=f(()=>a.value.fadeImage?a.value.inverted?1-d.value:d.value:void 0),y=f(()=>{var x,z;if(a.value.hide&&a.value.inverted)return 0;const o=((x=n.value)==null?void 0:x.contentHeight)??0,S=((z=n.value)==null?void 0:z.extensionHeight)??0;return v.value?u.value<m.value||a.value.fullyHide?o+S:o:o+S});se(()=>!!e.scrollBehavior,()=>{ne(()=>{v.value?a.value.inverted?l.value=u.value>m.value:l.value=h.value||u.value<m.value:l.value=!0})});const{ssrBootStyles:T}=Q(),{layoutItemStyles:H}=Re({id:e.name,order:f(()=>parseInt(e.order,10)),position:L(()=>e.location),layoutSize:y,elementSize:V(void 0),active:l,absolute:L(()=>e.absolute)});return w(()=>{const o=j.filterProps(e);return s(j,ue({ref:n,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...H.value,"--v-toolbar-image-opacity":c.value,height:void 0,...T.value},e.style]},o,{collapse:_.value,flat:p.value}),t)}),{}}}),Oe=Y({__name:"HeaderComponent",props:{title:{}},setup(e){const r=ce(),t=()=>{if(window.history.length<=1){const l=_e();l==="android"&&window.qianyuefish_app.onBack(),l=="ios"&&window.webkit.messageHandlers.onExit.postMessage("")}else r.go(-1)},n=f(()=>be());return(l,a)=>(A(),R(Ke,{color:"transparent",elevation:"0",style:C({"padding-top":n.value+"px"}),height:70+n.value},{default:g(()=>[s(He,null,{default:g(()=>[s(ze,null,{default:g(()=>[s(D,{cols:"3"},{default:g(()=>[s(Z,{icon:"mdi-chevron-left",onClick:t})]),_:1}),s(D,{cols:"6",class:"message-title"},{default:g(()=>[b("h3",null,ie(l.title),1)]),_:1}),s(D,{cols:"3"},{default:g(()=>[re(l.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3})]),_:3},8,["style","height"]))}}),We=X(Oe,[["__scopeId","data-v-66403f8f"]]),Ye=k({...N(),...Ne({fullHeight:!0}),...K()},"VApp"),Qe=B()({name:"VApp",props:Ye(),setup(e,r){let{slots:t}=r;const n=G(e),{layoutClasses:l,getLayoutItem:a,items:i,layoutRef:u}=Ee(e),{rtlClasses:m}=J();return w(()=>{var h;return b("div",{ref:u,class:E(["v-application",n.themeClasses.value,l.value,m.value,e.class]),style:C([e.style])},[b("div",{class:"v-application__wrap"},[(h=t.default)==null?void 0:h.call(t)])])}),{getLayoutItem:a,items:i,theme:n}}}),Xe=k({scrollable:Boolean,...N(),...Ie(),...U({tag:"main"})},"VMain"),Ze=B()({name:"VMain",props:Xe(),setup(e,r){let{slots:t}=r;const{dimensionStyles:n}=Pe(e),{mainStyles:l}=Le(),{ssrBootStyles:a}=Q();return w(()=>s(e.tag,{class:E(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:C([l.value,a.value,n.value,e.style])},{default:()=>{var i,u;return[e.scrollable?b("div",{class:"v-main__scroller"},[(i=t.default)==null?void 0:i.call(t)]):(u=t.default)==null?void 0:u.call(t)]}})),{}}}),et=Y({__name:"Chat",setup(e){const r=de(),{getDetailsInfo:t,getUidAndToken:n}=r,{uid:l,bbcToken:a}=q(r),i=ve(),{chatTitle:u}=q(i),m=ge();return W(async()=>{await n()&&(await t(),Me({uid:l.value,token:a.value}),De())}),me(()=>{Ue()}),(h,d)=>{const v=he("router-view");return A(),R(Qe,null,{default:g(()=>[s(We,{title:$(u)},{default:g(()=>[s(F,{name:"routes",mode:"out-in"},{default:g(()=>[$(m).name==="Messages"?(A(),R(Z,{key:0,icon:"mdi-alert-circle-outline",class:"report-btn",to:{name:"Report"}})):fe("",!0)]),_:1})]),_:1},8,["title"]),s(Ze,null,{default:g(()=>[s(v,null,{default:g(({Component:_})=>[s(F,{name:"routes",mode:"out-in",appear:""},{default:g(()=>[(A(),R(ye(_)))]),_:2},1024)]),_:1})]),_:1})]),_:1})}}}),nt=X(et,[["__scopeId","data-v-27fbe4e6"]]);export{nt as default};
