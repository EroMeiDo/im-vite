var On=Object.defineProperty;var Ln=(t,e,n)=>e in t?On(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var It=(t,e,n)=>Ln(t,typeof e!="symbol"?e+"":e,n);import{f as Rn}from"./VRow-D-1N7VL_.js";import{p as wn,a6 as Xt,a7 as Pn,X as mn,s as bn,a8 as Gn,a9 as _n,e as ht,j as Kn,r as qn,a4 as At,t as _t,h as Dt,o as Hn,aa as Sn,ab as Wn,ac as Ze,G as jn}from"./index-BN2Uu5Tc.js";const Ot=Symbol.for("vuetify:layout"),En=Symbol.for("vuetify:layout-item"),en=1e3,Gr=wn({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),_r=wn({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function Kr(){const t=Xt(Ot);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}function qr(t){const e=Xt(Ot);if(!e)throw new Error("[Vuetify] Could not find injected layout");const n=t.id??`layout-item-${Pn()}`,r=mn("useLayoutItem");Sn(En,{id:n});const a=bn(!1);Gn(()=>a.value=!0),_n(()=>a.value=!1);const{layoutItemStyles:c,layoutItemScrimStyles:x}=e.register(r,{...t,active:ht(()=>a.value?!1:t.active.value),id:n});return Kn(()=>e.unregister(n)),{layoutItemStyles:c,layoutRect:e.layoutRect,layoutItemScrimStyles:x}}const Vn=(t,e,n,r)=>{let a={top:0,left:0,right:0,bottom:0};const c=[{id:"",layer:{...a}}];for(const x of t){const l=e.get(x),N=n.get(x),T=r.get(x);if(!l||!N||!T)continue;const _={...a,[l.value]:parseInt(a[l.value],10)+(T.value?parseInt(N.value,10):0)};c.push({id:x,layer:_}),a=_}return c};function Hr(t){const e=Xt(Ot,null),n=ht(()=>e?e.rootZIndex.value-100:en),r=qn([]),a=At(new Map),c=At(new Map),x=At(new Map),l=At(new Map),N=At(new Map),{resizeRef:T,contentRect:_}=Rn(),te=ht(()=>{const j=new Map,le=t.overlaps??[];for(const h of le.filter(p=>p.includes(":"))){const[p,g]=h.split(":");if(!r.value.includes(p)||!r.value.includes(g))continue;const I=a.get(p),S=a.get(g),E=c.get(p),D=c.get(g);!I||!S||!E||!D||(j.set(g,{position:I.value,amount:parseInt(E.value,10)}),j.set(p,{position:S.value,amount:-parseInt(D.value,10)}))}return j}),ne=ht(()=>{const j=[...new Set([...x.values()].map(h=>h.value))].sort((h,p)=>h-p),le=[];for(const h of j){const p=r.value.filter(g=>{var I;return((I=x.get(g))==null?void 0:I.value)===h});le.push(...p)}return Vn(le,a,c,l)}),q=ht(()=>!Array.from(N.values()).some(j=>j.value)),V=ht(()=>ne.value[ne.value.length-1].layer),fe=_t(()=>({"--v-layout-left":Dt(V.value.left),"--v-layout-right":Dt(V.value.right),"--v-layout-top":Dt(V.value.top),"--v-layout-bottom":Dt(V.value.bottom),...q.value?void 0:{transition:"none"}})),he=ht(()=>ne.value.slice(1).map((j,le)=>{let{id:h}=j;const{layer:p}=ne.value[le],g=c.get(h),I=a.get(h);return{id:h,...p,size:Number(g.value),position:I.value}})),Ee=j=>he.value.find(le=>le.id===j),L=mn("createLayout"),Ce=bn(!1);Hn(()=>{Ce.value=!0}),Sn(Ot,{register:(j,le)=>{let{id:h,order:p,position:g,layoutSize:I,elementSize:S,active:E,disableTransitions:D,absolute:b}=le;x.set(h,p),a.set(h,g),c.set(h,I),l.set(h,E),D&&N.set(h,D);const B=Wn(En,L==null?void 0:L.vnode).indexOf(j);B>-1?r.value.splice(B,0,h):r.value.push(h);const M=ht(()=>he.value.findIndex(Y=>Y.id===h)),O=ht(()=>n.value+ne.value.length*2-M.value*2),z=ht(()=>{const Y=g.value==="left"||g.value==="right",xe=g.value==="right",Ie=g.value==="bottom",ae=S.value??I.value,de=ae===0?"%":"px",Be={[g.value]:0,zIndex:O.value,transform:`translate${Y?"X":"Y"}(${(E.value?0:-(ae===0?100:ae))*(xe||Ie?-1:1)}${de})`,position:b.value||n.value!==en?"absolute":"fixed",...q.value?void 0:{transition:"none"}};if(!Ce.value)return Be;const De=he.value[M.value];if(!De)throw new Error(`[Vuetify] Could not find layout item "${h}"`);const Xe=te.value.get(h);return Xe&&(De[Xe.position]+=Xe.amount),{...Be,height:Y?`calc(100% - ${De.top}px - ${De.bottom}px)`:S.value?`${S.value}px`:void 0,left:xe?void 0:`${De.left}px`,right:xe?`${De.right}px`:void 0,top:g.value!=="bottom"?`${De.top}px`:void 0,bottom:g.value!=="top"?`${De.bottom}px`:void 0,width:Y?S.value?`${S.value}px`:void 0:`calc(100% - ${De.left}px - ${De.right}px)`}}),K=ht(()=>({zIndex:O.value-1}));return{layoutItemStyles:z,layoutItemScrimStyles:K,zIndex:O}},unregister:j=>{x.delete(j),a.delete(j),c.delete(j),l.delete(j),N.delete(j),r.value=r.value.filter(le=>le!==j)},mainRect:V,mainStyles:fe,getLayoutItem:Ee,items:he,layoutRect:_,rootZIndex:n});const Me=_t(()=>["v-layout",{"v-layout--full-height":t.fullHeight}]),ue=_t(()=>({zIndex:e?n.value:void 0,position:e?"relative":void 0,overflow:e?"hidden":void 0}));return{layoutClasses:Me,layoutStyles:ue,getLayoutItem:Ee,items:he,layoutRect:_,layoutRef:T}}var $n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Kt=Math.ceil,nt=Math.floor,et="[BigNumber Error] ",tn=et+"Number primitive has more than 15 significant digits: ",ft=1e14,ce=14,qt=9007199254740991,Ht=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],wt=1e7,je=1e9;function Cn(t){var e,n,r,a=L.prototype={constructor:L,toString:null,valueOf:null},c=new L(1),x=20,l=4,N=-7,T=21,_=-1e7,te=1e7,ne=!1,q=1,V=0,fe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},he="0123456789abcdefghijklmnopqrstuvwxyz",Ee=!0;function L(h,p){var g,I,S,E,D,b,C,B,M=this;if(!(M instanceof L))return new L(h,p);if(p==null){if(h&&h._isBigNumber===!0){M.s=h.s,!h.c||h.e>te?M.c=M.e=null:h.e<_?M.c=[M.e=0]:(M.e=h.e,M.c=h.c.slice());return}if((b=typeof h=="number")&&h*0==0){if(M.s=1/h<0?(h=-h,-1):1,h===~~h){for(E=0,D=h;D>=10;D/=10,E++);E>te?M.c=M.e=null:(M.e=E,M.c=[h]);return}B=String(h)}else{if(!$n.test(B=String(h)))return r(M,B,b);M.s=B.charCodeAt(0)==45?(B=B.slice(1),-1):1}(E=B.indexOf("."))>-1&&(B=B.replace(".","")),(D=B.search(/e/i))>0?(E<0&&(E=D),E+=+B.slice(D+1),B=B.substring(0,D)):E<0&&(E=B.length)}else{if(Te(p,2,he.length,"Base"),p==10&&Ee)return M=new L(h),j(M,x+M.e+1,l);if(B=String(h),b=typeof h=="number"){if(h*0!=0)return r(M,B,b,p);if(M.s=1/h<0?(B=B.slice(1),-1):1,L.DEBUG&&B.replace(/^0\.0*|\./,"").length>15)throw Error(tn+h)}else M.s=B.charCodeAt(0)===45?(B=B.slice(1),-1):1;for(g=he.slice(0,p),E=D=0,C=B.length;D<C;D++)if(g.indexOf(I=B.charAt(D))<0){if(I=="."){if(D>E){E=C;continue}}else if(!S&&(B==B.toUpperCase()&&(B=B.toLowerCase())||B==B.toLowerCase()&&(B=B.toUpperCase()))){S=!0,D=-1,E=0;continue}return r(M,String(h),b,p)}b=!1,B=n(B,p,10,M.s),(E=B.indexOf("."))>-1?B=B.replace(".",""):E=B.length}for(D=0;B.charCodeAt(D)===48;D++);for(C=B.length;B.charCodeAt(--C)===48;);if(B=B.slice(D,++C)){if(C-=D,b&&L.DEBUG&&C>15&&(h>qt||h!==nt(h)))throw Error(tn+M.s*h);if((E=E-D-1)>te)M.c=M.e=null;else if(E<_)M.c=[M.e=0];else{if(M.e=E,M.c=[],D=(E+1)%ce,E<0&&(D+=ce),D<C){for(D&&M.c.push(+B.slice(0,D)),C-=ce;D<C;)M.c.push(+B.slice(D,D+=ce));D=ce-(B=B.slice(D)).length}else D-=C;for(;D--;B+="0");M.c.push(+B)}}else M.c=[M.e=0]}L.clone=Cn,L.ROUND_UP=0,L.ROUND_DOWN=1,L.ROUND_CEIL=2,L.ROUND_FLOOR=3,L.ROUND_HALF_UP=4,L.ROUND_HALF_DOWN=5,L.ROUND_HALF_EVEN=6,L.ROUND_HALF_CEIL=7,L.ROUND_HALF_FLOOR=8,L.EUCLID=9,L.config=L.set=function(h){var p,g;if(h!=null)if(typeof h=="object"){if(h.hasOwnProperty(p="DECIMAL_PLACES")&&(g=h[p],Te(g,0,je,p),x=g),h.hasOwnProperty(p="ROUNDING_MODE")&&(g=h[p],Te(g,0,8,p),l=g),h.hasOwnProperty(p="EXPONENTIAL_AT")&&(g=h[p],g&&g.pop?(Te(g[0],-je,0,p),Te(g[1],0,je,p),N=g[0],T=g[1]):(Te(g,-je,je,p),N=-(T=g<0?-g:g))),h.hasOwnProperty(p="RANGE"))if(g=h[p],g&&g.pop)Te(g[0],-je,-1,p),Te(g[1],1,je,p),_=g[0],te=g[1];else if(Te(g,-je,je,p),g)_=-(te=g<0?-g:g);else throw Error(et+p+" cannot be zero: "+g);if(h.hasOwnProperty(p="CRYPTO"))if(g=h[p],g===!!g)if(g)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ne=g;else throw ne=!g,Error(et+"crypto unavailable");else ne=g;else throw Error(et+p+" not true or false: "+g);if(h.hasOwnProperty(p="MODULO_MODE")&&(g=h[p],Te(g,0,9,p),q=g),h.hasOwnProperty(p="POW_PRECISION")&&(g=h[p],Te(g,0,je,p),V=g),h.hasOwnProperty(p="FORMAT"))if(g=h[p],typeof g=="object")fe=g;else throw Error(et+p+" not an object: "+g);if(h.hasOwnProperty(p="ALPHABET"))if(g=h[p],typeof g=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(g))Ee=g.slice(0,10)=="0123456789",he=g;else throw Error(et+p+" invalid: "+g)}else throw Error(et+"Object expected: "+h);return{DECIMAL_PLACES:x,ROUNDING_MODE:l,EXPONENTIAL_AT:[N,T],RANGE:[_,te],CRYPTO:ne,MODULO_MODE:q,POW_PRECISION:V,FORMAT:fe,ALPHABET:he}},L.isBigNumber=function(h){if(!h||h._isBigNumber!==!0)return!1;if(!L.DEBUG)return!0;var p,g,I=h.c,S=h.e,E=h.s;e:if({}.toString.call(I)=="[object Array]"){if((E===1||E===-1)&&S>=-je&&S<=je&&S===nt(S)){if(I[0]===0){if(S===0&&I.length===1)return!0;break e}if(p=(S+1)%ce,p<1&&(p+=ce),String(I[0]).length==p){for(p=0;p<I.length;p++)if(g=I[p],g<0||g>=ft||g!==nt(g))break e;if(g!==0)return!0}}}else if(I===null&&S===null&&(E===null||E===1||E===-1))return!0;throw Error(et+"Invalid BigNumber: "+h)},L.maximum=L.max=function(){return Me(arguments,-1)},L.minimum=L.min=function(){return Me(arguments,1)},L.random=function(){var h=9007199254740992,p=Math.random()*h&2097151?function(){return nt(Math.random()*h)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(g){var I,S,E,D,b,C=0,B=[],M=new L(c);if(g==null?g=x:Te(g,0,je),D=Kt(g/ce),ne)if(crypto.getRandomValues){for(I=crypto.getRandomValues(new Uint32Array(D*=2));C<D;)b=I[C]*131072+(I[C+1]>>>11),b>=9e15?(S=crypto.getRandomValues(new Uint32Array(2)),I[C]=S[0],I[C+1]=S[1]):(B.push(b%1e14),C+=2);C=D/2}else if(crypto.randomBytes){for(I=crypto.randomBytes(D*=7);C<D;)b=(I[C]&31)*281474976710656+I[C+1]*1099511627776+I[C+2]*4294967296+I[C+3]*16777216+(I[C+4]<<16)+(I[C+5]<<8)+I[C+6],b>=9e15?crypto.randomBytes(7).copy(I,C):(B.push(b%1e14),C+=7);C=D/7}else throw ne=!1,Error(et+"crypto unavailable");if(!ne)for(;C<D;)b=p(),b<9e15&&(B[C++]=b%1e14);for(D=B[--C],g%=ce,D&&g&&(b=Ht[ce-g],B[C]=nt(D/b)*b);B[C]===0;B.pop(),C--);if(C<0)B=[E=0];else{for(E=-1;B[0]===0;B.splice(0,1),E-=ce);for(C=1,b=B[0];b>=10;b/=10,C++);C<ce&&(E-=ce-C)}return M.e=E,M.c=B,M}}(),L.sum=function(){for(var h=1,p=arguments,g=new L(p[0]);h<p.length;)g=g.plus(p[h++]);return g},n=function(){var h="0123456789";function p(g,I,S,E){for(var D,b=[0],C,B=0,M=g.length;B<M;){for(C=b.length;C--;b[C]*=I);for(b[0]+=E.indexOf(g.charAt(B++)),D=0;D<b.length;D++)b[D]>S-1&&(b[D+1]==null&&(b[D+1]=0),b[D+1]+=b[D]/S|0,b[D]%=S)}return b.reverse()}return function(g,I,S,E,D){var b,C,B,M,O,z,K,Y,xe=g.indexOf("."),Ie=x,ae=l;for(xe>=0&&(M=V,V=0,g=g.replace(".",""),Y=new L(I),z=Y.pow(g.length-xe),V=M,Y.c=p(gt(tt(z.c),z.e,"0"),10,S,h),Y.e=Y.c.length),K=p(g,I,S,D?(b=he,h):(b=h,he)),B=M=K.length;K[--M]==0;K.pop());if(!K[0])return b.charAt(0);if(xe<0?--B:(z.c=K,z.e=B,z.s=E,z=e(z,Y,Ie,ae,S),K=z.c,O=z.r,B=z.e),C=B+Ie+1,xe=K[C],M=S/2,O=O||C<0||K[C+1]!=null,O=ae<4?(xe!=null||O)&&(ae==0||ae==(z.s<0?3:2)):xe>M||xe==M&&(ae==4||O||ae==6&&K[C-1]&1||ae==(z.s<0?8:7)),C<1||!K[0])g=O?gt(b.charAt(1),-Ie,b.charAt(0)):b.charAt(0);else{if(K.length=C,O)for(--S;++K[--C]>S;)K[C]=0,C||(++B,K=[1].concat(K));for(M=K.length;!K[--M];);for(xe=0,g="";xe<=M;g+=b.charAt(K[xe++]));g=gt(g,B,b.charAt(0))}return g}}(),e=function(){function h(I,S,E){var D,b,C,B,M=0,O=I.length,z=S%wt,K=S/wt|0;for(I=I.slice();O--;)C=I[O]%wt,B=I[O]/wt|0,D=K*C+B*z,b=z*C+D%wt*wt+M,M=(b/E|0)+(D/wt|0)+K*B,I[O]=b%E;return M&&(I=[M].concat(I)),I}function p(I,S,E,D){var b,C;if(E!=D)C=E>D?1:-1;else for(b=C=0;b<E;b++)if(I[b]!=S[b]){C=I[b]>S[b]?1:-1;break}return C}function g(I,S,E,D){for(var b=0;E--;)I[E]-=b,b=I[E]<S[E]?1:0,I[E]=b*D+I[E]-S[E];for(;!I[0]&&I.length>1;I.splice(0,1));}return function(I,S,E,D,b){var C,B,M,O,z,K,Y,xe,Ie,ae,de,Be,De,Xe,Qe,Ye,lt,_e=I.s==S.s?1:-1,Fe=I.c,Ae=S.c;if(!Fe||!Fe[0]||!Ae||!Ae[0])return new L(!I.s||!S.s||(Fe?Ae&&Fe[0]==Ae[0]:!Ae)?NaN:Fe&&Fe[0]==0||!Ae?_e*0:_e/0);for(xe=new L(_e),Ie=xe.c=[],B=I.e-S.e,_e=E+B+1,b||(b=ft,B=rt(I.e/ce)-rt(S.e/ce),_e=_e/ce|0),M=0;Ae[M]==(Fe[M]||0);M++);if(Ae[M]>(Fe[M]||0)&&B--,_e<0)Ie.push(1),O=!0;else{for(Xe=Fe.length,Ye=Ae.length,M=0,_e+=2,z=nt(b/(Ae[0]+1)),z>1&&(Ae=h(Ae,z,b),Fe=h(Fe,z,b),Ye=Ae.length,Xe=Fe.length),De=Ye,ae=Fe.slice(0,Ye),de=ae.length;de<Ye;ae[de++]=0);lt=Ae.slice(),lt=[0].concat(lt),Qe=Ae[0],Ae[1]>=b/2&&Qe++;do{if(z=0,C=p(Ae,ae,Ye,de),C<0){if(Be=ae[0],Ye!=de&&(Be=Be*b+(ae[1]||0)),z=nt(Be/Qe),z>1)for(z>=b&&(z=b-1),K=h(Ae,z,b),Y=K.length,de=ae.length;p(K,ae,Y,de)==1;)z--,g(K,Ye<Y?lt:Ae,Y,b),Y=K.length,C=1;else z==0&&(C=z=1),K=Ae.slice(),Y=K.length;if(Y<de&&(K=[0].concat(K)),g(ae,K,de,b),de=ae.length,C==-1)for(;p(Ae,ae,Ye,de)<1;)z++,g(ae,Ye<de?lt:Ae,de,b),de=ae.length}else C===0&&(z++,ae=[0]);Ie[M++]=z,ae[0]?ae[de++]=Fe[De]||0:(ae=[Fe[De]],de=1)}while((De++<Xe||ae[0]!=null)&&_e--);O=ae[0]!=null,Ie[0]||Ie.splice(0,1)}if(b==ft){for(M=1,_e=Ie[0];_e>=10;_e/=10,M++);j(xe,E+(xe.e=M+B*ce-1)+1,D,O)}else xe.e=B,xe.r=+O;return xe}}();function Ce(h,p,g,I){var S,E,D,b,C;if(g==null?g=l:Te(g,0,8),!h.c)return h.toString();if(S=h.c[0],D=h.e,p==null)C=tt(h.c),C=I==1||I==2&&(D<=N||D>=T)?Ut(C,D):gt(C,D,"0");else if(h=j(new L(h),p,g),E=h.e,C=tt(h.c),b=C.length,I==1||I==2&&(p<=E||E<=N)){for(;b<p;C+="0",b++);C=Ut(C,E)}else if(p-=D,C=gt(C,E,"0"),E+1>b){if(--p>0)for(C+=".";p--;C+="0");}else if(p+=E-b,p>0)for(E+1==b&&(C+=".");p--;C+="0");return h.s<0&&S?"-"+C:C}function Me(h,p){for(var g,I,S=1,E=new L(h[0]);S<h.length;S++)I=new L(h[S]),(!I.s||(g=St(E,I))===p||g===0&&E.s===p)&&(E=I);return E}function ue(h,p,g){for(var I=1,S=p.length;!p[--S];p.pop());for(S=p[0];S>=10;S/=10,I++);return(g=I+g*ce-1)>te?h.c=h.e=null:g<_?h.c=[h.e=0]:(h.e=g,h.c=p),h}r=function(){var h=/^(-?)0([xbo])(?=\w[\w.]*$)/i,p=/^([^.]+)\.$/,g=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,S=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(E,D,b,C){var B,M=b?D:D.replace(S,"");if(I.test(M))E.s=isNaN(M)?null:M<0?-1:1;else{if(!b&&(M=M.replace(h,function(O,z,K){return B=(K=K.toLowerCase())=="x"?16:K=="b"?2:8,!C||C==B?z:O}),C&&(B=C,M=M.replace(p,"$1").replace(g,"0.$1")),D!=M))return new L(M,B);if(L.DEBUG)throw Error(et+"Not a"+(C?" base "+C:"")+" number: "+D);E.s=null}E.c=E.e=null}}();function j(h,p,g,I){var S,E,D,b,C,B,M,O=h.c,z=Ht;if(O){e:{for(S=1,b=O[0];b>=10;b/=10,S++);if(E=p-S,E<0)E+=ce,D=p,C=O[B=0],M=nt(C/z[S-D-1]%10);else if(B=Kt((E+1)/ce),B>=O.length)if(I){for(;O.length<=B;O.push(0));C=M=0,S=1,E%=ce,D=E-ce+1}else break e;else{for(C=b=O[B],S=1;b>=10;b/=10,S++);E%=ce,D=E-ce+S,M=D<0?0:nt(C/z[S-D-1]%10)}if(I=I||p<0||O[B+1]!=null||(D<0?C:C%z[S-D-1]),I=g<4?(M||I)&&(g==0||g==(h.s<0?3:2)):M>5||M==5&&(g==4||I||g==6&&(E>0?D>0?C/z[S-D]:0:O[B-1])%10&1||g==(h.s<0?8:7)),p<1||!O[0])return O.length=0,I?(p-=h.e+1,O[0]=z[(ce-p%ce)%ce],h.e=-p||0):O[0]=h.e=0,h;if(E==0?(O.length=B,b=1,B--):(O.length=B+1,b=z[ce-E],O[B]=D>0?nt(C/z[S-D]%z[D])*b:0),I)for(;;)if(B==0){for(E=1,D=O[0];D>=10;D/=10,E++);for(D=O[0]+=b,b=1;D>=10;D/=10,b++);E!=b&&(h.e++,O[0]==ft&&(O[0]=1));break}else{if(O[B]+=b,O[B]!=ft)break;O[B--]=0,b=1}for(E=O.length;O[--E]===0;O.pop());}h.e>te?h.c=h.e=null:h.e<_&&(h.c=[h.e=0])}return h}function le(h){var p,g=h.e;return g===null?h.toString():(p=tt(h.c),p=g<=N||g>=T?Ut(p,g):gt(p,g,"0"),h.s<0?"-"+p:p)}return a.absoluteValue=a.abs=function(){var h=new L(this);return h.s<0&&(h.s=1),h},a.comparedTo=function(h,p){return St(this,new L(h,p))},a.decimalPlaces=a.dp=function(h,p){var g,I,S,E=this;if(h!=null)return Te(h,0,je),p==null?p=l:Te(p,0,8),j(new L(E),h+E.e+1,p);if(!(g=E.c))return null;if(I=((S=g.length-1)-rt(this.e/ce))*ce,S=g[S])for(;S%10==0;S/=10,I--);return I<0&&(I=0),I},a.dividedBy=a.div=function(h,p){return e(this,new L(h,p),x,l)},a.dividedToIntegerBy=a.idiv=function(h,p){return e(this,new L(h,p),0,1)},a.exponentiatedBy=a.pow=function(h,p){var g,I,S,E,D,b,C,B,M,O=this;if(h=new L(h),h.c&&!h.isInteger())throw Error(et+"Exponent not an integer: "+le(h));if(p!=null&&(p=new L(p)),b=h.e>14,!O.c||!O.c[0]||O.c[0]==1&&!O.e&&O.c.length==1||!h.c||!h.c[0])return M=new L(Math.pow(+le(O),b?h.s*(2-Ft(h)):+le(h))),p?M.mod(p):M;if(C=h.s<0,p){if(p.c?!p.c[0]:!p.s)return new L(NaN);I=!C&&O.isInteger()&&p.isInteger(),I&&(O=O.mod(p))}else{if(h.e>9&&(O.e>0||O.e<-1||(O.e==0?O.c[0]>1||b&&O.c[1]>=24e7:O.c[0]<8e13||b&&O.c[0]<=9999975e7)))return E=O.s<0&&Ft(h)?-0:0,O.e>-1&&(E=1/E),new L(C?1/E:E);V&&(E=Kt(V/ce+2))}for(b?(g=new L(.5),C&&(h.s=1),B=Ft(h)):(S=Math.abs(+le(h)),B=S%2),M=new L(c);;){if(B){if(M=M.times(O),!M.c)break;E?M.c.length>E&&(M.c.length=E):I&&(M=M.mod(p))}if(S){if(S=nt(S/2),S===0)break;B=S%2}else if(h=h.times(g),j(h,h.e+1,1),h.e>14)B=Ft(h);else{if(S=+le(h),S===0)break;B=S%2}O=O.times(O),E?O.c&&O.c.length>E&&(O.c.length=E):I&&(O=O.mod(p))}return I?M:(C&&(M=c.div(M)),p?M.mod(p):E?j(M,V,l,D):M)},a.integerValue=function(h){var p=new L(this);return h==null?h=l:Te(h,0,8),j(p,p.e+1,h)},a.isEqualTo=a.eq=function(h,p){return St(this,new L(h,p))===0},a.isFinite=function(){return!!this.c},a.isGreaterThan=a.gt=function(h,p){return St(this,new L(h,p))>0},a.isGreaterThanOrEqualTo=a.gte=function(h,p){return(p=St(this,new L(h,p)))===1||p===0},a.isInteger=function(){return!!this.c&&rt(this.e/ce)>this.c.length-2},a.isLessThan=a.lt=function(h,p){return St(this,new L(h,p))<0},a.isLessThanOrEqualTo=a.lte=function(h,p){return(p=St(this,new L(h,p)))===-1||p===0},a.isNaN=function(){return!this.s},a.isNegative=function(){return this.s<0},a.isPositive=function(){return this.s>0},a.isZero=function(){return!!this.c&&this.c[0]==0},a.minus=function(h,p){var g,I,S,E,D=this,b=D.s;if(h=new L(h,p),p=h.s,!b||!p)return new L(NaN);if(b!=p)return h.s=-p,D.plus(h);var C=D.e/ce,B=h.e/ce,M=D.c,O=h.c;if(!C||!B){if(!M||!O)return M?(h.s=-p,h):new L(O?D:NaN);if(!M[0]||!O[0])return O[0]?(h.s=-p,h):new L(M[0]?D:l==3?-0:0)}if(C=rt(C),B=rt(B),M=M.slice(),b=C-B){for((E=b<0)?(b=-b,S=M):(B=C,S=O),S.reverse(),p=b;p--;S.push(0));S.reverse()}else for(I=(E=(b=M.length)<(p=O.length))?b:p,b=p=0;p<I;p++)if(M[p]!=O[p]){E=M[p]<O[p];break}if(E&&(S=M,M=O,O=S,h.s=-h.s),p=(I=O.length)-(g=M.length),p>0)for(;p--;M[g++]=0);for(p=ft-1;I>b;){if(M[--I]<O[I]){for(g=I;g&&!M[--g];M[g]=p);--M[g],M[I]+=ft}M[I]-=O[I]}for(;M[0]==0;M.splice(0,1),--B);return M[0]?ue(h,M,B):(h.s=l==3?-1:1,h.c=[h.e=0],h)},a.modulo=a.mod=function(h,p){var g,I,S=this;return h=new L(h,p),!S.c||!h.s||h.c&&!h.c[0]?new L(NaN):!h.c||S.c&&!S.c[0]?new L(S):(q==9?(I=h.s,h.s=1,g=e(S,h,0,3),h.s=I,g.s*=I):g=e(S,h,0,q),h=S.minus(g.times(h)),!h.c[0]&&q==1&&(h.s=S.s),h)},a.multipliedBy=a.times=function(h,p){var g,I,S,E,D,b,C,B,M,O,z,K,Y,xe,Ie,ae=this,de=ae.c,Be=(h=new L(h,p)).c;if(!de||!Be||!de[0]||!Be[0])return!ae.s||!h.s||de&&!de[0]&&!Be||Be&&!Be[0]&&!de?h.c=h.e=h.s=null:(h.s*=ae.s,!de||!Be?h.c=h.e=null:(h.c=[0],h.e=0)),h;for(I=rt(ae.e/ce)+rt(h.e/ce),h.s*=ae.s,C=de.length,O=Be.length,C<O&&(Y=de,de=Be,Be=Y,S=C,C=O,O=S),S=C+O,Y=[];S--;Y.push(0));for(xe=ft,Ie=wt,S=O;--S>=0;){for(g=0,z=Be[S]%Ie,K=Be[S]/Ie|0,D=C,E=S+D;E>S;)B=de[--D]%Ie,M=de[D]/Ie|0,b=K*B+M*z,B=z*B+b%Ie*Ie+Y[E]+g,g=(B/xe|0)+(b/Ie|0)+K*M,Y[E--]=B%xe;Y[E]=g}return g?++I:Y.splice(0,1),ue(h,Y,I)},a.negated=function(){var h=new L(this);return h.s=-h.s||null,h},a.plus=function(h,p){var g,I=this,S=I.s;if(h=new L(h,p),p=h.s,!S||!p)return new L(NaN);if(S!=p)return h.s=-p,I.minus(h);var E=I.e/ce,D=h.e/ce,b=I.c,C=h.c;if(!E||!D){if(!b||!C)return new L(S/0);if(!b[0]||!C[0])return C[0]?h:new L(b[0]?I:S*0)}if(E=rt(E),D=rt(D),b=b.slice(),S=E-D){for(S>0?(D=E,g=C):(S=-S,g=b),g.reverse();S--;g.push(0));g.reverse()}for(S=b.length,p=C.length,S-p<0&&(g=C,C=b,b=g,p=S),S=0;p;)S=(b[--p]=b[p]+C[p]+S)/ft|0,b[p]=ft===b[p]?0:b[p]%ft;return S&&(b=[S].concat(b),++D),ue(h,b,D)},a.precision=a.sd=function(h,p){var g,I,S,E=this;if(h!=null&&h!==!!h)return Te(h,1,je),p==null?p=l:Te(p,0,8),j(new L(E),h,p);if(!(g=E.c))return null;if(S=g.length-1,I=S*ce+1,S=g[S]){for(;S%10==0;S/=10,I--);for(S=g[0];S>=10;S/=10,I++);}return h&&E.e+1>I&&(I=E.e+1),I},a.shiftedBy=function(h){return Te(h,-qt,qt),this.times("1e"+h)},a.squareRoot=a.sqrt=function(){var h,p,g,I,S,E=this,D=E.c,b=E.s,C=E.e,B=x+4,M=new L("0.5");if(b!==1||!D||!D[0])return new L(!b||b<0&&(!D||D[0])?NaN:D?E:1/0);if(b=Math.sqrt(+le(E)),b==0||b==1/0?(p=tt(D),(p.length+C)%2==0&&(p+="0"),b=Math.sqrt(+p),C=rt((C+1)/2)-(C<0||C%2),b==1/0?p="5e"+C:(p=b.toExponential(),p=p.slice(0,p.indexOf("e")+1)+C),g=new L(p)):g=new L(b+""),g.c[0]){for(C=g.e,b=C+B,b<3&&(b=0);;)if(S=g,g=M.times(S.plus(e(E,S,B,1))),tt(S.c).slice(0,b)===(p=tt(g.c)).slice(0,b))if(g.e<C&&--b,p=p.slice(b-3,b+1),p=="9999"||!I&&p=="4999"){if(!I&&(j(S,S.e+x+2,0),S.times(S).eq(E))){g=S;break}B+=4,b+=4,I=1}else{(!+p||!+p.slice(1)&&p.charAt(0)=="5")&&(j(g,g.e+x+2,1),h=!g.times(g).eq(E));break}}return j(g,g.e+x+1,l,h)},a.toExponential=function(h,p){return h!=null&&(Te(h,0,je),h++),Ce(this,h,p,1)},a.toFixed=function(h,p){return h!=null&&(Te(h,0,je),h=h+this.e+1),Ce(this,h,p)},a.toFormat=function(h,p,g){var I,S=this;if(g==null)h!=null&&p&&typeof p=="object"?(g=p,p=null):h&&typeof h=="object"?(g=h,h=p=null):g=fe;else if(typeof g!="object")throw Error(et+"Argument not an object: "+g);if(I=S.toFixed(h,p),S.c){var E,D=I.split("."),b=+g.groupSize,C=+g.secondaryGroupSize,B=g.groupSeparator||"",M=D[0],O=D[1],z=S.s<0,K=z?M.slice(1):M,Y=K.length;if(C&&(E=b,b=C,C=E,Y-=E),b>0&&Y>0){for(E=Y%b||b,M=K.substr(0,E);E<Y;E+=b)M+=B+K.substr(E,b);C>0&&(M+=B+K.slice(E)),z&&(M="-"+M)}I=O?M+(g.decimalSeparator||"")+((C=+g.fractionGroupSize)?O.replace(new RegExp("\\d{"+C+"}\\B","g"),"$&"+(g.fractionGroupSeparator||"")):O):M}return(g.prefix||"")+I+(g.suffix||"")},a.toFraction=function(h){var p,g,I,S,E,D,b,C,B,M,O,z,K=this,Y=K.c;if(h!=null&&(b=new L(h),!b.isInteger()&&(b.c||b.s!==1)||b.lt(c)))throw Error(et+"Argument "+(b.isInteger()?"out of range: ":"not an integer: ")+le(b));if(!Y)return new L(K);for(p=new L(c),B=g=new L(c),I=C=new L(c),z=tt(Y),E=p.e=z.length-K.e-1,p.c[0]=Ht[(D=E%ce)<0?ce+D:D],h=!h||b.comparedTo(p)>0?E>0?p:B:b,D=te,te=1/0,b=new L(z),C.c[0]=0;M=e(b,p,0,1),S=g.plus(M.times(I)),S.comparedTo(h)!=1;)g=I,I=S,B=C.plus(M.times(S=B)),C=S,p=b.minus(M.times(S=p)),b=S;return S=e(h.minus(g),I,0,1),C=C.plus(S.times(B)),g=g.plus(S.times(I)),C.s=B.s=K.s,E=E*2,O=e(B,I,E,l).minus(K).abs().comparedTo(e(C,g,E,l).minus(K).abs())<1?[B,I]:[C,g],te=D,O},a.toNumber=function(){return+le(this)},a.toPrecision=function(h,p){return h!=null&&Te(h,1,je),Ce(this,h,p,2)},a.toString=function(h){var p,g=this,I=g.s,S=g.e;return S===null?I?(p="Infinity",I<0&&(p="-"+p)):p="NaN":(h==null?p=S<=N||S>=T?Ut(tt(g.c),S):gt(tt(g.c),S,"0"):h===10&&Ee?(g=j(new L(g),x+S+1,l),p=gt(tt(g.c),g.e,"0")):(Te(h,2,he.length,"Base"),p=n(gt(tt(g.c),S,"0"),10,h,I,!0)),I<0&&g.c[0]&&(p="-"+p)),p},a.valueOf=a.toJSON=function(){return le(this)},a._isBigNumber=!0,a[Symbol.toStringTag]="BigNumber",a[Symbol.for("nodejs.util.inspect.custom")]=a.valueOf,t!=null&&L.set(t),L}function rt(t){var e=t|0;return t>0||t===e?e:e-1}function tt(t){for(var e,n,r=1,a=t.length,c=t[0]+"";r<a;){for(e=t[r++]+"",n=ce-e.length;n--;e="0"+e);c+=e}for(a=c.length;c.charCodeAt(--a)===48;);return c.slice(0,a+1||1)}function St(t,e){var n,r,a=t.c,c=e.c,x=t.s,l=e.s,N=t.e,T=e.e;if(!x||!l)return null;if(n=a&&!a[0],r=c&&!c[0],n||r)return n?r?0:-l:x;if(x!=l)return x;if(n=x<0,r=N==T,!a||!c)return r?0:!a^n?1:-1;if(!r)return N>T^n?1:-1;for(l=(N=a.length)<(T=c.length)?N:T,x=0;x<l;x++)if(a[x]!=c[x])return a[x]>c[x]^n?1:-1;return N==T?0:N>T^n?1:-1}function Te(t,e,n,r){if(t<e||t>n||t!==nt(t))throw Error(et+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Ft(t){var e=t.c.length-1;return rt(t.e/ce)==e&&t.c[e]%2!=0}function Ut(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function gt(t,e,n){var r,a;if(e<0){for(a=n+".";++e;a+=n);t=a+t}else if(r=t.length,++e>r){for(a=n,e-=r;--e;a+=n);t+=a}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Et=Cn(),Wt={},Mt={},nn;function zn(){if(nn)return Mt;nn=1,Mt.byteLength=l,Mt.toByteArray=T,Mt.fromByteArray=ne;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=r.length;a<c;++a)t[a]=r[a],e[r.charCodeAt(a)]=a;e[45]=62,e[95]=63;function x(q){var V=q.length;if(V%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var fe=q.indexOf("=");fe===-1&&(fe=V);var he=fe===V?0:4-fe%4;return[fe,he]}function l(q){var V=x(q),fe=V[0],he=V[1];return(fe+he)*3/4-he}function N(q,V,fe){return(V+fe)*3/4-fe}function T(q){var V,fe=x(q),he=fe[0],Ee=fe[1],L=new n(N(q,he,Ee)),Ce=0,Me=Ee>0?he-4:he,ue;for(ue=0;ue<Me;ue+=4)V=e[q.charCodeAt(ue)]<<18|e[q.charCodeAt(ue+1)]<<12|e[q.charCodeAt(ue+2)]<<6|e[q.charCodeAt(ue+3)],L[Ce++]=V>>16&255,L[Ce++]=V>>8&255,L[Ce++]=V&255;return Ee===2&&(V=e[q.charCodeAt(ue)]<<2|e[q.charCodeAt(ue+1)]>>4,L[Ce++]=V&255),Ee===1&&(V=e[q.charCodeAt(ue)]<<10|e[q.charCodeAt(ue+1)]<<4|e[q.charCodeAt(ue+2)]>>2,L[Ce++]=V>>8&255,L[Ce++]=V&255),L}function _(q){return t[q>>18&63]+t[q>>12&63]+t[q>>6&63]+t[q&63]}function te(q,V,fe){for(var he,Ee=[],L=V;L<fe;L+=3)he=(q[L]<<16&16711680)+(q[L+1]<<8&65280)+(q[L+2]&255),Ee.push(_(he));return Ee.join("")}function ne(q){for(var V,fe=q.length,he=fe%3,Ee=[],L=16383,Ce=0,Me=fe-he;Ce<Me;Ce+=L)Ee.push(te(q,Ce,Ce+L>Me?Me:Ce+L));return he===1?(V=q[fe-1],Ee.push(t[V>>2]+t[V<<4&63]+"==")):he===2&&(V=(q[fe-2]<<8)+q[fe-1],Ee.push(t[V>>10]+t[V>>4&63]+t[V<<2&63]+"=")),Ee.join("")}return Mt}var Nt={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var rn;function Jn(){return rn||(rn=1,Nt.read=function(t,e,n,r,a){var c,x,l=a*8-r-1,N=(1<<l)-1,T=N>>1,_=-7,te=n?a-1:0,ne=n?-1:1,q=t[e+te];for(te+=ne,c=q&(1<<-_)-1,q>>=-_,_+=l;_>0;c=c*256+t[e+te],te+=ne,_-=8);for(x=c&(1<<-_)-1,c>>=-_,_+=r;_>0;x=x*256+t[e+te],te+=ne,_-=8);if(c===0)c=1-T;else{if(c===N)return x?NaN:(q?-1:1)*(1/0);x=x+Math.pow(2,r),c=c-T}return(q?-1:1)*x*Math.pow(2,c-r)},Nt.write=function(t,e,n,r,a,c){var x,l,N,T=c*8-a-1,_=(1<<T)-1,te=_>>1,ne=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,q=r?0:c-1,V=r?1:-1,fe=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,x=_):(x=Math.floor(Math.log(e)/Math.LN2),e*(N=Math.pow(2,-x))<1&&(x--,N*=2),x+te>=1?e+=ne/N:e+=ne*Math.pow(2,1-te),e*N>=2&&(x++,N/=2),x+te>=_?(l=0,x=_):x+te>=1?(l=(e*N-1)*Math.pow(2,a),x=x+te):(l=e*Math.pow(2,te-1)*Math.pow(2,a),x=0));a>=8;t[n+q]=l&255,q+=V,l/=256,a-=8);for(x=x<<a|l,T+=a;T>0;t[n+q]=x&255,q+=V,x/=256,T-=8);t[n+q-V]|=fe*128}),Nt}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var sn;function Qn(){return sn||(sn=1,function(t){const e=zn(),n=Jn(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=L,t.INSPECT_MAX_BYTES=50;const a=2147483647;t.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=c(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const f=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(f,i),f.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function x(f){if(f>a)throw new RangeError('The value "'+f+'" is invalid for option "size"');const i=new Uint8Array(f);return Object.setPrototypeOf(i,l.prototype),i}function l(f,i,o){if(typeof f=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return te(f)}return N(f,i,o)}l.poolSize=8192;function N(f,i,o){if(typeof f=="string")return ne(f,i);if(ArrayBuffer.isView(f))return V(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(U(f,ArrayBuffer)||f&&U(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(U(f,SharedArrayBuffer)||f&&U(f.buffer,SharedArrayBuffer)))return fe(f,i,o);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const u=f.valueOf&&f.valueOf();if(u!=null&&u!==f)return l.from(u,i,o);const v=he(f);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return l.from(f[Symbol.toPrimitive]("string"),i,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}l.from=function(f,i,o){return N(f,i,o)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function T(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function _(f,i,o){return T(f),f<=0?x(f):i!==void 0?typeof o=="string"?x(f).fill(i,o):x(f).fill(i):x(f)}l.alloc=function(f,i,o){return _(f,i,o)};function te(f){return T(f),x(f<0?0:Ee(f)|0)}l.allocUnsafe=function(f){return te(f)},l.allocUnsafeSlow=function(f){return te(f)};function ne(f,i){if((typeof i!="string"||i==="")&&(i="utf8"),!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);const o=Ce(f,i)|0;let u=x(o);const v=u.write(f,i);return v!==o&&(u=u.slice(0,v)),u}function q(f){const i=f.length<0?0:Ee(f.length)|0,o=x(i);for(let u=0;u<i;u+=1)o[u]=f[u]&255;return o}function V(f){if(U(f,Uint8Array)){const i=new Uint8Array(f);return fe(i.buffer,i.byteOffset,i.byteLength)}return q(f)}function fe(f,i,o){if(i<0||f.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<i+(o||0))throw new RangeError('"length" is outside of buffer bounds');let u;return i===void 0&&o===void 0?u=new Uint8Array(f):o===void 0?u=new Uint8Array(f,i):u=new Uint8Array(f,i,o),Object.setPrototypeOf(u,l.prototype),u}function he(f){if(l.isBuffer(f)){const i=Ee(f.length)|0,o=x(i);return o.length===0||f.copy(o,0,0,i),o}if(f.length!==void 0)return typeof f.length!="number"||k(f.length)?x(0):q(f);if(f.type==="Buffer"&&Array.isArray(f.data))return q(f.data)}function Ee(f){if(f>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return f|0}function L(f){return+f!=f&&(f=0),l.alloc(+f)}l.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==l.prototype},l.compare=function(i,o){if(U(i,Uint8Array)&&(i=l.from(i,i.offset,i.byteLength)),U(o,Uint8Array)&&(o=l.from(o,o.offset,o.byteLength)),!l.isBuffer(i)||!l.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===o)return 0;let u=i.length,v=o.length;for(let A=0,F=Math.min(u,v);A<F;++A)if(i[A]!==o[A]){u=i[A],v=o[A];break}return u<v?-1:v<u?1:0},l.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(i,o){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return l.alloc(0);let u;if(o===void 0)for(o=0,u=0;u<i.length;++u)o+=i[u].length;const v=l.allocUnsafe(o);let A=0;for(u=0;u<i.length;++u){let F=i[u];if(U(F,Uint8Array))A+F.length>v.length?(l.isBuffer(F)||(F=l.from(F)),F.copy(v,A)):Uint8Array.prototype.set.call(v,F,A);else if(l.isBuffer(F))F.copy(v,A);else throw new TypeError('"list" argument must be an Array of Buffers');A+=F.length}return v};function Ce(f,i){if(l.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||U(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const o=f.length,u=arguments.length>2&&arguments[2]===!0;if(!u&&o===0)return 0;let v=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return w(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return s(f).length;default:if(v)return u?-1:w(f).length;i=(""+i).toLowerCase(),v=!0}}l.byteLength=Ce;function Me(f,i,o){let u=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,i>>>=0,o<=i))return"";for(f||(f="utf8");;)switch(f){case"hex":return O(this,i,o);case"utf8":case"utf-8":return D(this,i,o);case"ascii":return B(this,i,o);case"latin1":case"binary":return M(this,i,o);case"base64":return E(this,i,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,i,o);default:if(u)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),u=!0}}l.prototype._isBuffer=!0;function ue(f,i,o){const u=f[i];f[i]=f[o],f[o]=u}l.prototype.swap16=function(){const i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<i;o+=2)ue(this,o,o+1);return this},l.prototype.swap32=function(){const i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<i;o+=4)ue(this,o,o+3),ue(this,o+1,o+2);return this},l.prototype.swap64=function(){const i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<i;o+=8)ue(this,o,o+7),ue(this,o+1,o+6),ue(this,o+2,o+5),ue(this,o+3,o+4);return this},l.prototype.toString=function(){const i=this.length;return i===0?"":arguments.length===0?D(this,0,i):Me.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(i){if(!l.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:l.compare(this,i)===0},l.prototype.inspect=function(){let i="";const o=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(i+=" ... "),"<Buffer "+i+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(i,o,u,v,A){if(U(i,Uint8Array)&&(i=l.from(i,i.offset,i.byteLength)),!l.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(o===void 0&&(o=0),u===void 0&&(u=i?i.length:0),v===void 0&&(v=0),A===void 0&&(A=this.length),o<0||u>i.length||v<0||A>this.length)throw new RangeError("out of range index");if(v>=A&&o>=u)return 0;if(v>=A)return-1;if(o>=u)return 1;if(o>>>=0,u>>>=0,v>>>=0,A>>>=0,this===i)return 0;let F=A-v,J=u-o;const oe=Math.min(F,J),re=this.slice(v,A),se=i.slice(o,u);for(let ie=0;ie<oe;++ie)if(re[ie]!==se[ie]){F=re[ie],J=se[ie];break}return F<J?-1:J<F?1:0};function j(f,i,o,u,v){if(f.length===0)return-1;if(typeof o=="string"?(u=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,k(o)&&(o=v?0:f.length-1),o<0&&(o=f.length+o),o>=f.length){if(v)return-1;o=f.length-1}else if(o<0)if(v)o=0;else return-1;if(typeof i=="string"&&(i=l.from(i,u)),l.isBuffer(i))return i.length===0?-1:le(f,i,o,u,v);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(f,i,o):Uint8Array.prototype.lastIndexOf.call(f,i,o):le(f,[i],o,u,v);throw new TypeError("val must be string, number or Buffer")}function le(f,i,o,u,v){let A=1,F=f.length,J=i.length;if(u!==void 0&&(u=String(u).toLowerCase(),u==="ucs2"||u==="ucs-2"||u==="utf16le"||u==="utf-16le")){if(f.length<2||i.length<2)return-1;A=2,F/=2,J/=2,o/=2}function oe(se,ie){return A===1?se[ie]:se.readUInt16BE(ie*A)}let re;if(v){let se=-1;for(re=o;re<F;re++)if(oe(f,re)===oe(i,se===-1?0:re-se)){if(se===-1&&(se=re),re-se+1===J)return se*A}else se!==-1&&(re-=re-se),se=-1}else for(o+J>F&&(o=F-J),re=o;re>=0;re--){let se=!0;for(let ie=0;ie<J;ie++)if(oe(f,re+ie)!==oe(i,ie)){se=!1;break}if(se)return re}return-1}l.prototype.includes=function(i,o,u){return this.indexOf(i,o,u)!==-1},l.prototype.indexOf=function(i,o,u){return j(this,i,o,u,!0)},l.prototype.lastIndexOf=function(i,o,u){return j(this,i,o,u,!1)};function h(f,i,o,u){o=Number(o)||0;const v=f.length-o;u?(u=Number(u),u>v&&(u=v)):u=v;const A=i.length;u>A/2&&(u=A/2);let F;for(F=0;F<u;++F){const J=parseInt(i.substr(F*2,2),16);if(k(J))return F;f[o+F]=J}return F}function p(f,i,o,u){return d(w(i,f.length-o),f,o,u)}function g(f,i,o,u){return d(m(i),f,o,u)}function I(f,i,o,u){return d(s(i),f,o,u)}function S(f,i,o,u){return d(y(i,f.length-o),f,o,u)}l.prototype.write=function(i,o,u,v){if(o===void 0)v="utf8",u=this.length,o=0;else if(u===void 0&&typeof o=="string")v=o,u=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(u)?(u=u>>>0,v===void 0&&(v="utf8")):(v=u,u=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const A=this.length-o;if((u===void 0||u>A)&&(u=A),i.length>0&&(u<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let F=!1;for(;;)switch(v){case"hex":return h(this,i,o,u);case"utf8":case"utf-8":return p(this,i,o,u);case"ascii":case"latin1":case"binary":return g(this,i,o,u);case"base64":return I(this,i,o,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,i,o,u);default:if(F)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),F=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(f,i,o){return i===0&&o===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(i,o))}function D(f,i,o){o=Math.min(f.length,o);const u=[];let v=i;for(;v<o;){const A=f[v];let F=null,J=A>239?4:A>223?3:A>191?2:1;if(v+J<=o){let oe,re,se,ie;switch(J){case 1:A<128&&(F=A);break;case 2:oe=f[v+1],(oe&192)===128&&(ie=(A&31)<<6|oe&63,ie>127&&(F=ie));break;case 3:oe=f[v+1],re=f[v+2],(oe&192)===128&&(re&192)===128&&(ie=(A&15)<<12|(oe&63)<<6|re&63,ie>2047&&(ie<55296||ie>57343)&&(F=ie));break;case 4:oe=f[v+1],re=f[v+2],se=f[v+3],(oe&192)===128&&(re&192)===128&&(se&192)===128&&(ie=(A&15)<<18|(oe&63)<<12|(re&63)<<6|se&63,ie>65535&&ie<1114112&&(F=ie))}}F===null?(F=65533,J=1):F>65535&&(F-=65536,u.push(F>>>10&1023|55296),F=56320|F&1023),u.push(F),v+=J}return C(u)}const b=4096;function C(f){const i=f.length;if(i<=b)return String.fromCharCode.apply(String,f);let o="",u=0;for(;u<i;)o+=String.fromCharCode.apply(String,f.slice(u,u+=b));return o}function B(f,i,o){let u="";o=Math.min(f.length,o);for(let v=i;v<o;++v)u+=String.fromCharCode(f[v]&127);return u}function M(f,i,o){let u="";o=Math.min(f.length,o);for(let v=i;v<o;++v)u+=String.fromCharCode(f[v]);return u}function O(f,i,o){const u=f.length;(!i||i<0)&&(i=0),(!o||o<0||o>u)&&(o=u);let v="";for(let A=i;A<o;++A)v+=R[f[A]];return v}function z(f,i,o){const u=f.slice(i,o);let v="";for(let A=0;A<u.length-1;A+=2)v+=String.fromCharCode(u[A]+u[A+1]*256);return v}l.prototype.slice=function(i,o){const u=this.length;i=~~i,o=o===void 0?u:~~o,i<0?(i+=u,i<0&&(i=0)):i>u&&(i=u),o<0?(o+=u,o<0&&(o=0)):o>u&&(o=u),o<i&&(o=i);const v=this.subarray(i,o);return Object.setPrototypeOf(v,l.prototype),v};function K(f,i,o){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+i>o)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(i,o,u){i=i>>>0,o=o>>>0,u||K(i,o,this.length);let v=this[i],A=1,F=0;for(;++F<o&&(A*=256);)v+=this[i+F]*A;return v},l.prototype.readUintBE=l.prototype.readUIntBE=function(i,o,u){i=i>>>0,o=o>>>0,u||K(i,o,this.length);let v=this[i+--o],A=1;for(;o>0&&(A*=256);)v+=this[i+--o]*A;return v},l.prototype.readUint8=l.prototype.readUInt8=function(i,o){return i=i>>>0,o||K(i,1,this.length),this[i]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(i,o){return i=i>>>0,o||K(i,2,this.length),this[i]|this[i+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(i,o){return i=i>>>0,o||K(i,2,this.length),this[i]<<8|this[i+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(i,o){return i=i>>>0,o||K(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(i,o){return i=i>>>0,o||K(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},l.prototype.readBigUInt64LE=Z(function(i){i=i>>>0,_e(i,"offset");const o=this[i],u=this[i+7];(o===void 0||u===void 0)&&Fe(i,this.length-8);const v=o+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,A=this[++i]+this[++i]*2**8+this[++i]*2**16+u*2**24;return BigInt(v)+(BigInt(A)<<BigInt(32))}),l.prototype.readBigUInt64BE=Z(function(i){i=i>>>0,_e(i,"offset");const o=this[i],u=this[i+7];(o===void 0||u===void 0)&&Fe(i,this.length-8);const v=o*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],A=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+u;return(BigInt(v)<<BigInt(32))+BigInt(A)}),l.prototype.readIntLE=function(i,o,u){i=i>>>0,o=o>>>0,u||K(i,o,this.length);let v=this[i],A=1,F=0;for(;++F<o&&(A*=256);)v+=this[i+F]*A;return A*=128,v>=A&&(v-=Math.pow(2,8*o)),v},l.prototype.readIntBE=function(i,o,u){i=i>>>0,o=o>>>0,u||K(i,o,this.length);let v=o,A=1,F=this[i+--v];for(;v>0&&(A*=256);)F+=this[i+--v]*A;return A*=128,F>=A&&(F-=Math.pow(2,8*o)),F},l.prototype.readInt8=function(i,o){return i=i>>>0,o||K(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},l.prototype.readInt16LE=function(i,o){i=i>>>0,o||K(i,2,this.length);const u=this[i]|this[i+1]<<8;return u&32768?u|4294901760:u},l.prototype.readInt16BE=function(i,o){i=i>>>0,o||K(i,2,this.length);const u=this[i+1]|this[i]<<8;return u&32768?u|4294901760:u},l.prototype.readInt32LE=function(i,o){return i=i>>>0,o||K(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},l.prototype.readInt32BE=function(i,o){return i=i>>>0,o||K(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},l.prototype.readBigInt64LE=Z(function(i){i=i>>>0,_e(i,"offset");const o=this[i],u=this[i+7];(o===void 0||u===void 0)&&Fe(i,this.length-8);const v=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(u<<24);return(BigInt(v)<<BigInt(32))+BigInt(o+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),l.prototype.readBigInt64BE=Z(function(i){i=i>>>0,_e(i,"offset");const o=this[i],u=this[i+7];(o===void 0||u===void 0)&&Fe(i,this.length-8);const v=(o<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(v)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+u)}),l.prototype.readFloatLE=function(i,o){return i=i>>>0,o||K(i,4,this.length),n.read(this,i,!0,23,4)},l.prototype.readFloatBE=function(i,o){return i=i>>>0,o||K(i,4,this.length),n.read(this,i,!1,23,4)},l.prototype.readDoubleLE=function(i,o){return i=i>>>0,o||K(i,8,this.length),n.read(this,i,!0,52,8)},l.prototype.readDoubleBE=function(i,o){return i=i>>>0,o||K(i,8,this.length),n.read(this,i,!1,52,8)};function Y(f,i,o,u,v,A){if(!l.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>v||i<A)throw new RangeError('"value" argument is out of bounds');if(o+u>f.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(i,o,u,v){if(i=+i,o=o>>>0,u=u>>>0,!v){const J=Math.pow(2,8*u)-1;Y(this,i,o,u,J,0)}let A=1,F=0;for(this[o]=i&255;++F<u&&(A*=256);)this[o+F]=i/A&255;return o+u},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(i,o,u,v){if(i=+i,o=o>>>0,u=u>>>0,!v){const J=Math.pow(2,8*u)-1;Y(this,i,o,u,J,0)}let A=u-1,F=1;for(this[o+A]=i&255;--A>=0&&(F*=256);)this[o+A]=i/F&255;return o+u},l.prototype.writeUint8=l.prototype.writeUInt8=function(i,o,u){return i=+i,o=o>>>0,u||Y(this,i,o,1,255,0),this[o]=i&255,o+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(i,o,u){return i=+i,o=o>>>0,u||Y(this,i,o,2,65535,0),this[o]=i&255,this[o+1]=i>>>8,o+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(i,o,u){return i=+i,o=o>>>0,u||Y(this,i,o,2,65535,0),this[o]=i>>>8,this[o+1]=i&255,o+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(i,o,u){return i=+i,o=o>>>0,u||Y(this,i,o,4,4294967295,0),this[o+3]=i>>>24,this[o+2]=i>>>16,this[o+1]=i>>>8,this[o]=i&255,o+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(i,o,u){return i=+i,o=o>>>0,u||Y(this,i,o,4,4294967295,0),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255,o+4};function xe(f,i,o,u,v){lt(i,u,v,f,o,7);let A=Number(i&BigInt(4294967295));f[o++]=A,A=A>>8,f[o++]=A,A=A>>8,f[o++]=A,A=A>>8,f[o++]=A;let F=Number(i>>BigInt(32)&BigInt(4294967295));return f[o++]=F,F=F>>8,f[o++]=F,F=F>>8,f[o++]=F,F=F>>8,f[o++]=F,o}function Ie(f,i,o,u,v){lt(i,u,v,f,o,7);let A=Number(i&BigInt(4294967295));f[o+7]=A,A=A>>8,f[o+6]=A,A=A>>8,f[o+5]=A,A=A>>8,f[o+4]=A;let F=Number(i>>BigInt(32)&BigInt(4294967295));return f[o+3]=F,F=F>>8,f[o+2]=F,F=F>>8,f[o+1]=F,F=F>>8,f[o]=F,o+8}l.prototype.writeBigUInt64LE=Z(function(i,o=0){return xe(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Z(function(i,o=0){return Ie(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(i,o,u,v){if(i=+i,o=o>>>0,!v){const oe=Math.pow(2,8*u-1);Y(this,i,o,u,oe-1,-oe)}let A=0,F=1,J=0;for(this[o]=i&255;++A<u&&(F*=256);)i<0&&J===0&&this[o+A-1]!==0&&(J=1),this[o+A]=(i/F>>0)-J&255;return o+u},l.prototype.writeIntBE=function(i,o,u,v){if(i=+i,o=o>>>0,!v){const oe=Math.pow(2,8*u-1);Y(this,i,o,u,oe-1,-oe)}let A=u-1,F=1,J=0;for(this[o+A]=i&255;--A>=0&&(F*=256);)i<0&&J===0&&this[o+A+1]!==0&&(J=1),this[o+A]=(i/F>>0)-J&255;return o+u},l.prototype.writeInt8=function(i,o,u){return i=+i,o=o>>>0,u||Y(this,i,o,1,127,-128),i<0&&(i=255+i+1),this[o]=i&255,o+1},l.prototype.writeInt16LE=function(i,o,u){return i=+i,o=o>>>0,u||Y(this,i,o,2,32767,-32768),this[o]=i&255,this[o+1]=i>>>8,o+2},l.prototype.writeInt16BE=function(i,o,u){return i=+i,o=o>>>0,u||Y(this,i,o,2,32767,-32768),this[o]=i>>>8,this[o+1]=i&255,o+2},l.prototype.writeInt32LE=function(i,o,u){return i=+i,o=o>>>0,u||Y(this,i,o,4,2147483647,-2147483648),this[o]=i&255,this[o+1]=i>>>8,this[o+2]=i>>>16,this[o+3]=i>>>24,o+4},l.prototype.writeInt32BE=function(i,o,u){return i=+i,o=o>>>0,u||Y(this,i,o,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=i&255,o+4},l.prototype.writeBigInt64LE=Z(function(i,o=0){return xe(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Z(function(i,o=0){return Ie(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ae(f,i,o,u,v,A){if(o+u>f.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function de(f,i,o,u,v){return i=+i,o=o>>>0,v||ae(f,i,o,4),n.write(f,i,o,u,23,4),o+4}l.prototype.writeFloatLE=function(i,o,u){return de(this,i,o,!0,u)},l.prototype.writeFloatBE=function(i,o,u){return de(this,i,o,!1,u)};function Be(f,i,o,u,v){return i=+i,o=o>>>0,v||ae(f,i,o,8),n.write(f,i,o,u,52,8),o+8}l.prototype.writeDoubleLE=function(i,o,u){return Be(this,i,o,!0,u)},l.prototype.writeDoubleBE=function(i,o,u){return Be(this,i,o,!1,u)},l.prototype.copy=function(i,o,u,v){if(!l.isBuffer(i))throw new TypeError("argument should be a Buffer");if(u||(u=0),!v&&v!==0&&(v=this.length),o>=i.length&&(o=i.length),o||(o=0),v>0&&v<u&&(v=u),v===u||i.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),i.length-o<v-u&&(v=i.length-o+u);const A=v-u;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,u,v):Uint8Array.prototype.set.call(i,this.subarray(u,v),o),A},l.prototype.fill=function(i,o,u,v){if(typeof i=="string"){if(typeof o=="string"?(v=o,o=0,u=this.length):typeof u=="string"&&(v=u,u=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!l.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(i.length===1){const F=i.charCodeAt(0);(v==="utf8"&&F<128||v==="latin1")&&(i=F)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(o<0||this.length<o||this.length<u)throw new RangeError("Out of range index");if(u<=o)return this;o=o>>>0,u=u===void 0?this.length:u>>>0,i||(i=0);let A;if(typeof i=="number")for(A=o;A<u;++A)this[A]=i;else{const F=l.isBuffer(i)?i:l.from(i,v),J=F.length;if(J===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(A=0;A<u-o;++A)this[A+o]=F[A%J]}return this};const De={};function Xe(f,i,o){De[f]=class extends o{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}Xe("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Xe("ERR_INVALID_ARG_TYPE",function(f,i){return`The "${f}" argument must be of type number. Received type ${typeof i}`},TypeError),Xe("ERR_OUT_OF_RANGE",function(f,i,o){let u=`The value of "${f}" is out of range.`,v=o;return Number.isInteger(o)&&Math.abs(o)>2**32?v=Qe(String(o)):typeof o=="bigint"&&(v=String(o),(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(v=Qe(v)),v+="n"),u+=` It must be ${i}. Received ${v}`,u},RangeError);function Qe(f){let i="",o=f.length;const u=f[0]==="-"?1:0;for(;o>=u+4;o-=3)i=`_${f.slice(o-3,o)}${i}`;return`${f.slice(0,o)}${i}`}function Ye(f,i,o){_e(i,"offset"),(f[i]===void 0||f[i+o]===void 0)&&Fe(i,f.length-(o+1))}function lt(f,i,o,u,v,A){if(f>o||f<i){const F=typeof i=="bigint"?"n":"";let J;throw i===0||i===BigInt(0)?J=`>= 0${F} and < 2${F} ** ${(A+1)*8}${F}`:J=`>= -(2${F} ** ${(A+1)*8-1}${F}) and < 2 ** ${(A+1)*8-1}${F}`,new De.ERR_OUT_OF_RANGE("value",J,f)}Ye(u,v,A)}function _e(f,i){if(typeof f!="number")throw new De.ERR_INVALID_ARG_TYPE(i,"number",f)}function Fe(f,i,o){throw Math.floor(f)!==f?(_e(f,o),new De.ERR_OUT_OF_RANGE("offset","an integer",f)):i<0?new De.ERR_BUFFER_OUT_OF_BOUNDS:new De.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${i}`,f)}const Ae=/[^+/0-9A-Za-z-_]/g;function Gt(f){if(f=f.split("=")[0],f=f.trim().replace(Ae,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function w(f,i){i=i||1/0;let o;const u=f.length;let v=null;const A=[];for(let F=0;F<u;++F){if(o=f.charCodeAt(F),o>55295&&o<57344){if(!v){if(o>56319){(i-=3)>-1&&A.push(239,191,189);continue}else if(F+1===u){(i-=3)>-1&&A.push(239,191,189);continue}v=o;continue}if(o<56320){(i-=3)>-1&&A.push(239,191,189),v=o;continue}o=(v-55296<<10|o-56320)+65536}else v&&(i-=3)>-1&&A.push(239,191,189);if(v=null,o<128){if((i-=1)<0)break;A.push(o)}else if(o<2048){if((i-=2)<0)break;A.push(o>>6|192,o&63|128)}else if(o<65536){if((i-=3)<0)break;A.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((i-=4)<0)break;A.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return A}function m(f){const i=[];for(let o=0;o<f.length;++o)i.push(f.charCodeAt(o)&255);return i}function y(f,i){let o,u,v;const A=[];for(let F=0;F<f.length&&!((i-=2)<0);++F)o=f.charCodeAt(F),u=o>>8,v=o%256,A.push(v),A.push(u);return A}function s(f){return e.toByteArray(Gt(f))}function d(f,i,o,u){let v;for(v=0;v<u&&!(v+o>=i.length||v>=f.length);++v)i[v+o]=f[v];return v}function U(f,i){return f instanceof i||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===i.name}function k(f){return f!==f}const R=function(){const f="0123456789abcdef",i=new Array(256);for(let o=0;o<16;++o){const u=o*16;for(let v=0;v<16;++v)i[u+v]=f[o]+f[v]}return i}();function Z(f){return typeof BigInt>"u"?ee:f}function ee(){throw new Error("BigInt not supported")}}(Wt)),Wt}var kt=Qn(),Yt=function(){function t(){}return t.AddUnsigned=function(e,n){var r,a,c,x,l;return c=e&2147483648,x=n&2147483648,r=e&1073741824,a=n&1073741824,l=(e&1073741823)+(n&1073741823),r&a?l^2147483648^c^x:r|a?l&1073741824?l^3221225472^c^x:l^1073741824^c^x:l^c^x},t.FF=function(e,n,r,a,c,x,l){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.F(n,r,a),c),l)),this.AddUnsigned(this.RotateLeft(e,x),n)},t.GG=function(e,n,r,a,c,x,l){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.G(n,r,a),c),l)),this.AddUnsigned(this.RotateLeft(e,x),n)},t.HH=function(e,n,r,a,c,x,l){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.H(n,r,a),c),l)),this.AddUnsigned(this.RotateLeft(e,x),n)},t.II=function(e,n,r,a,c,x,l){return e=this.AddUnsigned(e,this.AddUnsigned(this.AddUnsigned(this.I(n,r,a),c),l)),this.AddUnsigned(this.RotateLeft(e,x),n)},t.ConvertToWordArray=function(e){for(var n,r=e.length,a=r+8,c=(a-a%64)/64,x=(c+1)*16,l=Array(x-1),N=0,T=0;T<r;)n=(T-T%4)/4,N=T%4*8,l[n]=l[n]|e.charCodeAt(T)<<N,T++;return n=(T-T%4)/4,N=T%4*8,l[n]=l[n]|128<<N,l[x-2]=r<<3,l[x-1]=r>>>29,l},t.WordToHex=function(e){var n="",r="",a,c;for(c=0;c<=3;c++)a=e>>>c*8&255,r="0"+a.toString(16),n=n+r.substr(r.length-2,2);return n},t.Utf8Encode=function(e){var n="",r;e=e.replace(/\r\n/g,`
`);for(var a=0;a<e.length;a++)r=e.charCodeAt(a),r<128?n+=String.fromCharCode(r):r>127&&r<2048?(n+=String.fromCharCode(r>>6|192),n+=String.fromCharCode(r&63|128)):(n+=String.fromCharCode(r>>12|224),n+=String.fromCharCode(r>>6&63|128),n+=String.fromCharCode(r&63|128));return n},t.init=function(e){var n;for(typeof e!="string"&&(e=JSON.stringify(e)),this._string=this.Utf8Encode(e),this.x=this.ConvertToWordArray(this._string),this.a=1732584193,this.b=4023233417,this.c=2562383102,this.d=271733878,this.k=0;this.k<this.x.length;this.k+=16)this.AA=this.a,this.BB=this.b,this.CC=this.c,this.DD=this.d,this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k],this.S11,3614090360),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+1],this.S12,3905402710),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+2],this.S13,606105819),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+3],this.S14,3250441966),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+4],this.S11,4118548399),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+5],this.S12,1200080426),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+6],this.S13,2821735955),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+7],this.S14,4249261313),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+8],this.S11,1770035416),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+9],this.S12,2336552879),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+10],this.S13,4294925233),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+11],this.S14,2304563134),this.a=this.FF(this.a,this.b,this.c,this.d,this.x[this.k+12],this.S11,1804603682),this.d=this.FF(this.d,this.a,this.b,this.c,this.x[this.k+13],this.S12,4254626195),this.c=this.FF(this.c,this.d,this.a,this.b,this.x[this.k+14],this.S13,2792965006),this.b=this.FF(this.b,this.c,this.d,this.a,this.x[this.k+15],this.S14,1236535329),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+1],this.S21,4129170786),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+6],this.S22,3225465664),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+11],this.S23,643717713),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k],this.S24,3921069994),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+5],this.S21,3593408605),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+10],this.S22,38016083),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+15],this.S23,3634488961),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+4],this.S24,3889429448),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+9],this.S21,568446438),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+14],this.S22,3275163606),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+3],this.S23,4107603335),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+8],this.S24,1163531501),this.a=this.GG(this.a,this.b,this.c,this.d,this.x[this.k+13],this.S21,2850285829),this.d=this.GG(this.d,this.a,this.b,this.c,this.x[this.k+2],this.S22,4243563512),this.c=this.GG(this.c,this.d,this.a,this.b,this.x[this.k+7],this.S23,1735328473),this.b=this.GG(this.b,this.c,this.d,this.a,this.x[this.k+12],this.S24,2368359562),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+5],this.S31,4294588738),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+8],this.S32,2272392833),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+11],this.S33,1839030562),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+14],this.S34,4259657740),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+1],this.S31,2763975236),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+4],this.S32,1272893353),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+7],this.S33,4139469664),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+10],this.S34,3200236656),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+13],this.S31,681279174),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k],this.S32,3936430074),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+3],this.S33,3572445317),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+6],this.S34,76029189),this.a=this.HH(this.a,this.b,this.c,this.d,this.x[this.k+9],this.S31,3654602809),this.d=this.HH(this.d,this.a,this.b,this.c,this.x[this.k+12],this.S32,3873151461),this.c=this.HH(this.c,this.d,this.a,this.b,this.x[this.k+15],this.S33,530742520),this.b=this.HH(this.b,this.c,this.d,this.a,this.x[this.k+2],this.S34,3299628645),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k],this.S41,4096336452),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+7],this.S42,1126891415),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+14],this.S43,2878612391),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+5],this.S44,4237533241),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+12],this.S41,1700485571),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+3],this.S42,2399980690),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+10],this.S43,4293915773),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+1],this.S44,2240044497),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+8],this.S41,1873313359),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+15],this.S42,4264355552),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+6],this.S43,2734768916),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+13],this.S44,1309151649),this.a=this.II(this.a,this.b,this.c,this.d,this.x[this.k+4],this.S41,4149444226),this.d=this.II(this.d,this.a,this.b,this.c,this.x[this.k+11],this.S42,3174756917),this.c=this.II(this.c,this.d,this.a,this.b,this.x[this.k+2],this.S43,718787259),this.b=this.II(this.b,this.c,this.d,this.a,this.x[this.k+9],this.S44,3951481745),this.a=this.AddUnsigned(this.a,this.AA),this.b=this.AddUnsigned(this.b,this.BB),this.c=this.AddUnsigned(this.c,this.CC),this.d=this.AddUnsigned(this.d,this.DD);return n=this.WordToHex(this.a)+this.WordToHex(this.b)+this.WordToHex(this.c)+this.WordToHex(this.d),n.toLowerCase()},t.x=Array(),t.S11=7,t.S12=12,t.S13=17,t.S14=22,t.S21=5,t.S22=9,t.S23=14,t.S24=20,t.S31=4,t.S32=11,t.S33=16,t.S34=23,t.S41=6,t.S42=10,t.S43=15,t.S44=21,t.RotateLeft=function(e,n){return e<<n|e>>>32-n},t.F=function(e,n,r){return e&n|~e&r},t.G=function(e,n,r){return e&r|n&~r},t.H=function(e,n,r){return e^n^r},t.I=function(e,n,r){return n^(e|~r)},t}(),dt={},on;function Xn(){if(on)return dt;on=1,Object.defineProperty(dt,"__esModule",{value:!0});let t=new Uint8Array(32);t[0]=9;function e(w){var m,y=new Float64Array(16);if(w)for(m=0;m<w.length;m++)y[m]=w[m];return y}const n=e(),r=e([1]),a=e([56129,1]),c=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),x=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),N=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),T=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function _(w,m,y,s){w[m]=y>>24&255,w[m+1]=y>>16&255,w[m+2]=y>>8&255,w[m+3]=y&255,w[m+4]=s>>24&255,w[m+5]=s>>16&255,w[m+6]=s>>8&255,w[m+7]=s&255}function te(w,m,y,s,d){var U,k=0;for(U=0;U<d;U++)k|=w[m+U]^y[s+U];return(1&k-1>>>8)-1}function ne(w,m,y,s){return te(w,m,y,s,32)}function q(w,m){var y;for(y=0;y<16;y++)w[y]=m[y]|0}function V(w){var m,y,s=1;for(m=0;m<16;m++)y=w[m]+s+65535,s=Math.floor(y/65536),w[m]=y-s*65536;w[0]+=s-1+37*(s-1)}function fe(w,m,y){for(var s,d=~(y-1),U=0;U<16;U++)s=d&(w[U]^m[U]),w[U]^=s,m[U]^=s}function he(w,m){var y,s,d,U=e(),k=e();for(y=0;y<16;y++)k[y]=m[y];for(V(k),V(k),V(k),s=0;s<2;s++){for(U[0]=k[0]-65517,y=1;y<15;y++)U[y]=k[y]-65535-(U[y-1]>>16&1),U[y-1]&=65535;U[15]=k[15]-32767-(U[14]>>16&1),d=U[15]>>16&1,U[14]&=65535,fe(k,U,1-d)}for(y=0;y<16;y++)w[2*y]=k[y]&255,w[2*y+1]=k[y]>>8}function Ee(w,m){var y=new Uint8Array(32),s=new Uint8Array(32);return he(y,w),he(s,m),ne(y,0,s,0)}function L(w){var m=new Uint8Array(32);return he(m,w),m[0]&1}function Ce(w,m){var y;for(y=0;y<16;y++)w[y]=m[2*y]+(m[2*y+1]<<8);w[15]&=32767}function Me(w,m,y){for(var s=0;s<16;s++)w[s]=m[s]+y[s]}function ue(w,m,y){for(var s=0;s<16;s++)w[s]=m[s]-y[s]}function j(w,m,y){var s,d,U=0,k=0,R=0,Z=0,ee=0,f=0,i=0,o=0,u=0,v=0,A=0,F=0,J=0,oe=0,re=0,se=0,ie=0,ye=0,ve=0,Se=0,ge=0,P=0,G=0,$=0,H=0,W=0,X=0,We=0,at=0,pt=0,bt=0,we=y[0],ke=y[1],Oe=y[2],Le=y[3],me=y[4],Ue=y[5],Ne=y[6],Ke=y[7],be=y[8],Re=y[9],Pe=y[10],Ge=y[11],He=y[12],Ve=y[13],$e=y[14],ze=y[15];s=m[0],U+=s*we,k+=s*ke,R+=s*Oe,Z+=s*Le,ee+=s*me,f+=s*Ue,i+=s*Ne,o+=s*Ke,u+=s*be,v+=s*Re,A+=s*Pe,F+=s*Ge,J+=s*He,oe+=s*Ve,re+=s*$e,se+=s*ze,s=m[1],k+=s*we,R+=s*ke,Z+=s*Oe,ee+=s*Le,f+=s*me,i+=s*Ue,o+=s*Ne,u+=s*Ke,v+=s*be,A+=s*Re,F+=s*Pe,J+=s*Ge,oe+=s*He,re+=s*Ve,se+=s*$e,ie+=s*ze,s=m[2],R+=s*we,Z+=s*ke,ee+=s*Oe,f+=s*Le,i+=s*me,o+=s*Ue,u+=s*Ne,v+=s*Ke,A+=s*be,F+=s*Re,J+=s*Pe,oe+=s*Ge,re+=s*He,se+=s*Ve,ie+=s*$e,ye+=s*ze,s=m[3],Z+=s*we,ee+=s*ke,f+=s*Oe,i+=s*Le,o+=s*me,u+=s*Ue,v+=s*Ne,A+=s*Ke,F+=s*be,J+=s*Re,oe+=s*Pe,re+=s*Ge,se+=s*He,ie+=s*Ve,ye+=s*$e,ve+=s*ze,s=m[4],ee+=s*we,f+=s*ke,i+=s*Oe,o+=s*Le,u+=s*me,v+=s*Ue,A+=s*Ne,F+=s*Ke,J+=s*be,oe+=s*Re,re+=s*Pe,se+=s*Ge,ie+=s*He,ye+=s*Ve,ve+=s*$e,Se+=s*ze,s=m[5],f+=s*we,i+=s*ke,o+=s*Oe,u+=s*Le,v+=s*me,A+=s*Ue,F+=s*Ne,J+=s*Ke,oe+=s*be,re+=s*Re,se+=s*Pe,ie+=s*Ge,ye+=s*He,ve+=s*Ve,Se+=s*$e,ge+=s*ze,s=m[6],i+=s*we,o+=s*ke,u+=s*Oe,v+=s*Le,A+=s*me,F+=s*Ue,J+=s*Ne,oe+=s*Ke,re+=s*be,se+=s*Re,ie+=s*Pe,ye+=s*Ge,ve+=s*He,Se+=s*Ve,ge+=s*$e,P+=s*ze,s=m[7],o+=s*we,u+=s*ke,v+=s*Oe,A+=s*Le,F+=s*me,J+=s*Ue,oe+=s*Ne,re+=s*Ke,se+=s*be,ie+=s*Re,ye+=s*Pe,ve+=s*Ge,Se+=s*He,ge+=s*Ve,P+=s*$e,G+=s*ze,s=m[8],u+=s*we,v+=s*ke,A+=s*Oe,F+=s*Le,J+=s*me,oe+=s*Ue,re+=s*Ne,se+=s*Ke,ie+=s*be,ye+=s*Re,ve+=s*Pe,Se+=s*Ge,ge+=s*He,P+=s*Ve,G+=s*$e,$+=s*ze,s=m[9],v+=s*we,A+=s*ke,F+=s*Oe,J+=s*Le,oe+=s*me,re+=s*Ue,se+=s*Ne,ie+=s*Ke,ye+=s*be,ve+=s*Re,Se+=s*Pe,ge+=s*Ge,P+=s*He,G+=s*Ve,$+=s*$e,H+=s*ze,s=m[10],A+=s*we,F+=s*ke,J+=s*Oe,oe+=s*Le,re+=s*me,se+=s*Ue,ie+=s*Ne,ye+=s*Ke,ve+=s*be,Se+=s*Re,ge+=s*Pe,P+=s*Ge,G+=s*He,$+=s*Ve,H+=s*$e,W+=s*ze,s=m[11],F+=s*we,J+=s*ke,oe+=s*Oe,re+=s*Le,se+=s*me,ie+=s*Ue,ye+=s*Ne,ve+=s*Ke,Se+=s*be,ge+=s*Re,P+=s*Pe,G+=s*Ge,$+=s*He,H+=s*Ve,W+=s*$e,X+=s*ze,s=m[12],J+=s*we,oe+=s*ke,re+=s*Oe,se+=s*Le,ie+=s*me,ye+=s*Ue,ve+=s*Ne,Se+=s*Ke,ge+=s*be,P+=s*Re,G+=s*Pe,$+=s*Ge,H+=s*He,W+=s*Ve,X+=s*$e,We+=s*ze,s=m[13],oe+=s*we,re+=s*ke,se+=s*Oe,ie+=s*Le,ye+=s*me,ve+=s*Ue,Se+=s*Ne,ge+=s*Ke,P+=s*be,G+=s*Re,$+=s*Pe,H+=s*Ge,W+=s*He,X+=s*Ve,We+=s*$e,at+=s*ze,s=m[14],re+=s*we,se+=s*ke,ie+=s*Oe,ye+=s*Le,ve+=s*me,Se+=s*Ue,ge+=s*Ne,P+=s*Ke,G+=s*be,$+=s*Re,H+=s*Pe,W+=s*Ge,X+=s*He,We+=s*Ve,at+=s*$e,pt+=s*ze,s=m[15],se+=s*we,ie+=s*ke,ye+=s*Oe,ve+=s*Le,Se+=s*me,ge+=s*Ue,P+=s*Ne,G+=s*Ke,$+=s*be,H+=s*Re,W+=s*Pe,X+=s*Ge,We+=s*He,at+=s*Ve,pt+=s*$e,bt+=s*ze,U+=38*ie,k+=38*ye,R+=38*ve,Z+=38*Se,ee+=38*ge,f+=38*P,i+=38*G,o+=38*$,u+=38*H,v+=38*W,A+=38*X,F+=38*We,J+=38*at,oe+=38*pt,re+=38*bt,d=1,s=U+d+65535,d=Math.floor(s/65536),U=s-d*65536,s=k+d+65535,d=Math.floor(s/65536),k=s-d*65536,s=R+d+65535,d=Math.floor(s/65536),R=s-d*65536,s=Z+d+65535,d=Math.floor(s/65536),Z=s-d*65536,s=ee+d+65535,d=Math.floor(s/65536),ee=s-d*65536,s=f+d+65535,d=Math.floor(s/65536),f=s-d*65536,s=i+d+65535,d=Math.floor(s/65536),i=s-d*65536,s=o+d+65535,d=Math.floor(s/65536),o=s-d*65536,s=u+d+65535,d=Math.floor(s/65536),u=s-d*65536,s=v+d+65535,d=Math.floor(s/65536),v=s-d*65536,s=A+d+65535,d=Math.floor(s/65536),A=s-d*65536,s=F+d+65535,d=Math.floor(s/65536),F=s-d*65536,s=J+d+65535,d=Math.floor(s/65536),J=s-d*65536,s=oe+d+65535,d=Math.floor(s/65536),oe=s-d*65536,s=re+d+65535,d=Math.floor(s/65536),re=s-d*65536,s=se+d+65535,d=Math.floor(s/65536),se=s-d*65536,U+=d-1+37*(d-1),d=1,s=U+d+65535,d=Math.floor(s/65536),U=s-d*65536,s=k+d+65535,d=Math.floor(s/65536),k=s-d*65536,s=R+d+65535,d=Math.floor(s/65536),R=s-d*65536,s=Z+d+65535,d=Math.floor(s/65536),Z=s-d*65536,s=ee+d+65535,d=Math.floor(s/65536),ee=s-d*65536,s=f+d+65535,d=Math.floor(s/65536),f=s-d*65536,s=i+d+65535,d=Math.floor(s/65536),i=s-d*65536,s=o+d+65535,d=Math.floor(s/65536),o=s-d*65536,s=u+d+65535,d=Math.floor(s/65536),u=s-d*65536,s=v+d+65535,d=Math.floor(s/65536),v=s-d*65536,s=A+d+65535,d=Math.floor(s/65536),A=s-d*65536,s=F+d+65535,d=Math.floor(s/65536),F=s-d*65536,s=J+d+65535,d=Math.floor(s/65536),J=s-d*65536,s=oe+d+65535,d=Math.floor(s/65536),oe=s-d*65536,s=re+d+65535,d=Math.floor(s/65536),re=s-d*65536,s=se+d+65535,d=Math.floor(s/65536),se=s-d*65536,U+=d-1+37*(d-1),w[0]=U,w[1]=k,w[2]=R,w[3]=Z,w[4]=ee,w[5]=f,w[6]=i,w[7]=o,w[8]=u,w[9]=v,w[10]=A,w[11]=F,w[12]=J,w[13]=oe,w[14]=re,w[15]=se}function le(w,m){j(w,m,m)}function h(w,m){var y=e(),s;for(s=0;s<16;s++)y[s]=m[s];for(s=253;s>=0;s--)le(y,y),s!==2&&s!==4&&j(y,y,m);for(s=0;s<16;s++)w[s]=y[s]}function p(w,m){var y=e(),s;for(s=0;s<16;s++)y[s]=m[s];for(s=250;s>=0;s--)le(y,y),s!==1&&j(y,y,m);for(s=0;s<16;s++)w[s]=y[s]}function g(w,m,y){var s=new Uint8Array(32),d=new Float64Array(80),U,k,R=e(),Z=e(),ee=e(),f=e(),i=e(),o=e();for(k=0;k<31;k++)s[k]=m[k];for(s[31]=m[31]&127|64,s[0]&=248,Ce(d,y),k=0;k<16;k++)Z[k]=d[k],f[k]=R[k]=ee[k]=0;for(R[0]=f[0]=1,k=254;k>=0;--k)U=s[k>>>3]>>>(k&7)&1,fe(R,Z,U),fe(ee,f,U),Me(i,R,ee),ue(R,R,ee),Me(ee,Z,f),ue(Z,Z,f),le(f,i),le(o,R),j(R,ee,R),j(ee,Z,i),Me(i,R,ee),ue(R,R,ee),le(Z,R),ue(ee,f,o),j(R,ee,a),Me(R,R,f),j(ee,ee,R),j(R,f,o),j(f,Z,d),le(Z,i),fe(R,Z,U),fe(ee,f,U);for(k=0;k<16;k++)d[k+16]=R[k],d[k+32]=ee[k],d[k+48]=Z[k],d[k+64]=f[k];var u=d.subarray(32),v=d.subarray(16);return h(u,u),j(v,v,u),he(w,v),0}function I(w,m){return g(w,m,t)}var S=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function E(w,m,y,s){for(var d=new Int32Array(16),U=new Int32Array(16),k,R,Z,ee,f,i,o,u,v,A,F,J,oe,re,se,ie,ye,ve,Se,ge,P,G,$,H,W,X,We=w[0],at=w[1],pt=w[2],bt=w[3],we=w[4],ke=w[5],Oe=w[6],Le=w[7],me=m[0],Ue=m[1],Ne=m[2],Ke=m[3],be=m[4],Re=m[5],Pe=m[6],Ge=m[7],He=0;s>=128;){for(Se=0;Se<16;Se++)ge=8*Se+He,d[Se]=y[ge+0]<<24|y[ge+1]<<16|y[ge+2]<<8|y[ge+3],U[Se]=y[ge+4]<<24|y[ge+5]<<16|y[ge+6]<<8|y[ge+7];for(Se=0;Se<80;Se++)if(k=We,R=at,Z=pt,ee=bt,f=we,i=ke,o=Oe,u=Le,v=me,A=Ue,F=Ne,J=Ke,oe=be,re=Re,se=Pe,ie=Ge,P=Le,G=Ge,$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=(we>>>14|be<<18)^(we>>>18|be<<14)^(be>>>9|we<<23),G=(be>>>14|we<<18)^(be>>>18|we<<14)^(we>>>9|be<<23),$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,P=we&ke^~we&Oe,G=be&Re^~be&Pe,$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,P=S[Se*2],G=S[Se*2+1],$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,P=d[Se%16],G=U[Se%16],$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,ye=W&65535|X<<16,ve=$&65535|H<<16,P=ye,G=ve,$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=(We>>>28|me<<4)^(me>>>2|We<<30)^(me>>>7|We<<25),G=(me>>>28|We<<4)^(We>>>2|me<<30)^(We>>>7|me<<25),$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,P=We&at^We&pt^at&pt,G=me&Ue^me&Ne^Ue&Ne,$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,u=W&65535|X<<16,ie=$&65535|H<<16,P=ee,G=J,$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=ye,G=ve,$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,ee=W&65535|X<<16,J=$&65535|H<<16,at=k,pt=R,bt=Z,we=ee,ke=f,Oe=i,Le=o,We=u,Ue=v,Ne=A,Ke=F,be=J,Re=oe,Pe=re,Ge=se,me=ie,Se%16===15)for(ge=0;ge<16;ge++)P=d[ge],G=U[ge],$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=d[(ge+9)%16],G=U[(ge+9)%16],$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,ye=d[(ge+1)%16],ve=U[(ge+1)%16],P=(ye>>>1|ve<<31)^(ye>>>8|ve<<24)^ye>>>7,G=(ve>>>1|ye<<31)^(ve>>>8|ye<<24)^(ve>>>7|ye<<25),$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,ye=d[(ge+14)%16],ve=U[(ge+14)%16],P=(ye>>>19|ve<<13)^(ve>>>29|ye<<3)^ye>>>6,G=(ve>>>19|ye<<13)^(ye>>>29|ve<<3)^(ve>>>6|ye<<26),$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,d[ge]=W&65535|X<<16,U[ge]=$&65535|H<<16;P=We,G=me,$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=w[0],G=m[0],$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,w[0]=We=W&65535|X<<16,m[0]=me=$&65535|H<<16,P=at,G=Ue,$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=w[1],G=m[1],$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,w[1]=at=W&65535|X<<16,m[1]=Ue=$&65535|H<<16,P=pt,G=Ne,$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=w[2],G=m[2],$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,w[2]=pt=W&65535|X<<16,m[2]=Ne=$&65535|H<<16,P=bt,G=Ke,$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=w[3],G=m[3],$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,w[3]=bt=W&65535|X<<16,m[3]=Ke=$&65535|H<<16,P=we,G=be,$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=w[4],G=m[4],$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,w[4]=we=W&65535|X<<16,m[4]=be=$&65535|H<<16,P=ke,G=Re,$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=w[5],G=m[5],$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,w[5]=ke=W&65535|X<<16,m[5]=Re=$&65535|H<<16,P=Oe,G=Pe,$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=w[6],G=m[6],$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,w[6]=Oe=W&65535|X<<16,m[6]=Pe=$&65535|H<<16,P=Le,G=Ge,$=G&65535,H=G>>>16,W=P&65535,X=P>>>16,P=w[7],G=m[7],$+=G&65535,H+=G>>>16,W+=P&65535,X+=P>>>16,H+=$>>>16,W+=H>>>16,X+=W>>>16,w[7]=Le=W&65535|X<<16,m[7]=Ge=$&65535|H<<16,He+=128,s-=128}return s}function D(w,m,y){var s=new Int32Array(8),d=new Int32Array(8),U=new Uint8Array(256),k,R=y;for(s[0]=1779033703,s[1]=3144134277,s[2]=1013904242,s[3]=2773480762,s[4]=1359893119,s[5]=2600822924,s[6]=528734635,s[7]=1541459225,d[0]=4089235720,d[1]=2227873595,d[2]=4271175723,d[3]=1595750129,d[4]=2917565137,d[5]=725511199,d[6]=4215389547,d[7]=327033209,E(s,d,m,y),y%=128,k=0;k<y;k++)U[k]=m[R-y+k];for(U[y]=128,y=256-128*(y<112?1:0),U[y-9]=0,_(U,y-8,R/536870912|0,R<<3),E(s,d,U,y),k=0;k<8;k++)_(w,8*k,s[k],d[k]);return 0}function b(w,m){var y=e(),s=e(),d=e(),U=e(),k=e(),R=e(),Z=e(),ee=e(),f=e();ue(y,w[1],w[0]),ue(f,m[1],m[0]),j(y,y,f),Me(s,w[0],w[1]),Me(f,m[0],m[1]),j(s,s,f),j(d,w[3],m[3]),j(d,d,x),j(U,w[2],m[2]),Me(U,U,U),ue(k,s,y),ue(R,U,d),Me(Z,U,d),Me(ee,s,y),j(w[0],k,R),j(w[1],ee,Z),j(w[2],Z,R),j(w[3],k,ee)}function C(w,m,y){var s;for(s=0;s<4;s++)fe(w[s],m[s],y)}function B(w,m){var y=e(),s=e(),d=e();h(d,m[2]),j(y,m[0],d),j(s,m[1],d),he(w,s),w[31]^=L(y)<<7}function M(w,m,y){var s,d;for(q(w[0],n),q(w[1],r),q(w[2],r),q(w[3],n),d=255;d>=0;--d)s=y[d/8|0]>>(d&7)&1,C(w,m,s),b(m,w),b(w,w),C(w,m,s)}function O(w,m){var y=[e(),e(),e(),e()];q(y[0],l),q(y[1],N),q(y[2],r),j(y[3],l,N),M(w,y,m)}var z=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function K(w,m){var y,s,d,U;for(s=63;s>=32;--s){for(y=0,d=s-32,U=s-12;d<U;++d)m[d]+=y-16*m[s]*z[d-(s-32)],y=m[d]+128>>8,m[d]-=y*256;m[d]+=y,m[s]=0}for(y=0,d=0;d<32;d++)m[d]+=y-(m[31]>>4)*z[d],y=m[d]>>8,m[d]&=255;for(d=0;d<32;d++)m[d]-=y*z[d];for(s=0;s<32;s++)m[s+1]+=m[s]>>8,w[s]=m[s]&255}function Y(w){var m=new Float64Array(64),y;for(y=0;y<64;y++)m[y]=w[y];for(y=0;y<64;y++)w[y]=0;K(w,m)}function xe(w,m,y,s){var d=new Uint8Array(64),U=new Uint8Array(64),k,R,Z=new Float64Array(64),ee=[e(),e(),e(),e()];for(k=0;k<y;k++)w[64+k]=m[k];for(k=0;k<32;k++)w[32+k]=s[k];for(D(U,w.subarray(32),y+32),Y(U),O(ee,U),B(w,ee),k=0;k<32;k++)w[k+32]=s[32+k];for(D(d,w,y+64),Y(d),k=0;k<64;k++)Z[k]=0;for(k=0;k<32;k++)Z[k]=U[k];for(k=0;k<32;k++)for(R=0;R<32;R++)Z[k+R]+=d[k]*s[R];return K(w.subarray(32),Z),y+64}function Ie(w,m,y,s,d){var U=new Uint8Array(64),k=new Uint8Array(64),R,Z,ee=new Float64Array(64),f=[e(),e(),e(),e()];for(w[0]=254,R=1;R<32;R++)w[R]=255;for(R=0;R<32;R++)w[32+R]=s[R];for(R=0;R<y;R++)w[64+R]=m[R];for(R=0;R<64;R++)w[y+64+R]=d[R];for(D(k,w,y+128),Y(k),O(f,k),B(w,f),R=0;R<32;R++)w[R+32]=s[32+R];for(D(U,w,y+64),Y(U),R=0;R<64;R++)w[y+64+R]=0;for(R=0;R<64;R++)ee[R]=0;for(R=0;R<32;R++)ee[R]=k[R];for(R=0;R<32;R++)for(Z=0;Z<32;Z++)ee[R+Z]+=U[R]*s[Z];return K(w.subarray(32,y+64),ee),y+64}function ae(w,m,y,s,d){for(var U=new Uint8Array(64),k=[e(),e(),e(),e()],R=0;R<32;R++)U[R]=s[R];U[0]&=248,U[31]&=127,U[31]|=64,O(k,U),B(U.subarray(32),k);var Z=U[63]&128,ee;return d?ee=Ie(w,m,y,U,d):ee=xe(w,m,y,U),w[63]|=Z,ee}function de(w,m){var y=e(),s=e(),d=e(),U=e(),k=e(),R=e(),Z=e();return q(w[2],r),Ce(w[1],m),le(d,w[1]),j(U,d,c),ue(d,d,w[2]),Me(U,w[2],U),le(k,U),le(R,k),j(Z,R,k),j(y,Z,d),j(y,y,U),p(y,y),j(y,y,d),j(y,y,U),j(y,y,U),j(w[0],y,U),le(s,w[0]),j(s,s,U),Ee(s,d)&&j(w[0],w[0],T),le(s,w[0]),j(s,s,U),Ee(s,d)?-1:(L(w[0])===m[31]>>7&&ue(w[0],n,w[0]),j(w[3],w[0],w[1]),0)}function Be(w,m,y,s){var d,U,k=new Uint8Array(32),R=new Uint8Array(64),Z=[e(),e(),e(),e()],ee=[e(),e(),e(),e()];if(U=-1,y<64||de(ee,s))return-1;for(d=0;d<y;d++)w[d]=m[d];for(d=0;d<32;d++)w[d+32]=s[d];if(D(R,w,y),Y(R),M(Z,ee,R),O(ee,m.subarray(32)),b(Z,ee),B(k,Z),y-=64,ne(m,0,k,0)){for(d=0;d<y;d++)w[d]=0;return-1}for(d=0;d<y;d++)w[d]=m[d+64];return U=y,U}function De(w){var m=new Uint8Array(32),y=e(),s=e(),d=e();return Ce(y,w),Me(s,y,r),ue(d,y,r),h(s,s),j(s,s,d),he(m,s),m}function Xe(w,m,y,s){var d=De(s);return d[31]|=m[63]&128,m[63]&=127,Be(w,m,y,d)}function Qe(...w){var m,y;for(y=0;y<arguments.length;y++)if((m=Object.prototype.toString.call(arguments[y]))!=="[object Uint8Array]")throw new TypeError("unexpected type "+m+", use Uint8Array")}function Ye(w,m){if(Qe(m,w),m.length!==32)throw new Error("wrong public key length");if(w.length!==32)throw new Error("wrong secret key length");var y=new Uint8Array(32);return g(y,w,m),y}dt.sharedKey=Ye;function lt(w,m,y){if(Qe(m,w),w.length!==32)throw new Error("wrong secret key length");if(y){if(Qe(y),y.length!==64)throw new Error("wrong random data length");var s=new Uint8Array(128+m.length);return ae(s,m,m.length,w,y),new Uint8Array(s.subarray(0,64+m.length))}else{var d=new Uint8Array(64+m.length);return ae(d,m,m.length,w),d}}dt.signMessage=lt;function _e(w,m){if(Qe(m,w),w.length!==32)throw new Error("wrong public key length");var y=new Uint8Array(m.length),s=Xe(y,m,m.length,w);if(s<0)return null;for(var d=new Uint8Array(s),U=0;U<d.length;U++)d[U]=y[U];return d}dt.openMessage=_e;function Fe(w,m,y){if(Qe(w,m),w.length!==32)throw new Error("wrong secret key length");if(y&&(Qe(y),y.length!==64))throw new Error("wrong random data length");var s=new Uint8Array((y?128:64)+m.length);ae(s,m,m.length,w,y);for(var d=new Uint8Array(64),U=0;U<d.length;U++)d[U]=s[U];return d}dt.sign=Fe;function Ae(w,m,y){if(Qe(m,y,w),y.length!==64)throw new Error("wrong signature length");if(w.length!==32)throw new Error("wrong public key length");var s=new Uint8Array(64+m.length),d=new Uint8Array(64+m.length),U;for(U=0;U<64;U++)s[U]=y[U];for(U=0;U<m.length;U++)s[U+64]=m[U];return Xe(d,s,s.length,w)>=0}dt.verify=Ae;function Gt(w){if(Qe(w),w.length!==32)throw new Error("wrong seed length");for(var m=new Uint8Array(32),y=new Uint8Array(32),s=0;s<32;s++)m[s]=w[s];return I(y,m),m[0]&=248,m[31]&=127,m[31]|=64,y[31]&=127,{public:y,private:m}}return dt.generateKeyPair=Gt,dt.default={},dt}var an=Xn(),jt=function(t,e){return jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},jt(t,e)};function qe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");jt(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function it(t,e,n,r){function a(c){return c instanceof n?c:new n(function(x){x(c)})}return new(n||(n=Promise))(function(c,x){function l(_){try{T(r.next(_))}catch(te){x(te)}}function N(_){try{T(r.throw(_))}catch(te){x(te)}}function T(_){_.done?c(_.value):a(_.value).then(l,N)}T((r=r.apply(t,[])).next())})}function st(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,a,c,x;return x={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function l(T){return function(_){return N([T,_])}}function N(T){if(r)throw new TypeError("Generator is already executing.");for(;x&&(x=0,T[0]&&(n=0)),n;)try{if(r=1,a&&(c=T[0]&2?a.return:T[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,T[1])).done)return c;switch(a=0,c&&(T=[T[0]&2,c.value]),T[0]){case 0:case 1:c=T;break;case 4:return n.label++,{value:T[1],done:!1};case 5:n.label++,a=T[1],T=[0];continue;case 7:T=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(T[0]===6||T[0]===2)){n=0;continue}if(T[0]===3&&(!c||T[1]>c[0]&&T[1]<c[3])){n.label=T[1];break}if(T[0]===6&&n.label<c[1]){n.label=c[1],c=T;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(T);break}c[2]&&n.ops.pop(),n.trys.pop();continue}T=e.call(t,n)}catch(_){T=[6,_],a=0}finally{r=c=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}}function Vt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var c=arguments[e],x=0,l=c.length;x<l;x++,a++)r[a]=c[x];return r}var ut=function(){function t(){}return t.unknown=0,t.text=1,t.image=2,t.stream=98,t.cmd=99,t.signalMessage=21e3,t}(),Bt=function(){function t(){this.w=new Array,this.d32=new Et(4294967296)}return t.prototype.writeByte=function(e){this.w.push(e)},t.prototype.writeBytes=function(e){var n;(n=this.w).push.apply(n,e)},t.prototype.writeInt64=function(e){var n=e.div(this.d32).toNumber(),r=e.mod(this.d32).toNumber();this.w.push(n>>24&255),this.w.push(n>>16&255),this.w.push(n>>8&255),this.w.push(n&255),this.w.push(r>>24&255),this.w.push(r>>16&255),this.w.push(r>>8&255),this.w.push(r&255)},t.prototype.writeInt32=function(e){this.w.push(e>>24),this.w.push(e>>16),this.w.push(e>>8),this.w.push(e&255)},t.prototype.writeUint8=function(e){this.w.push(e)},t.prototype.writeInt16=function(e){this.w.push(e>>8),this.w.push(e&255)},t.prototype.writeString=function(e){var n;if(e&&e.length>0){var r=this.stringToUint(e);this.writeInt16(r.length),(n=this.w).push.apply(n,r)}else this.writeInt16(0)},t.prototype.stringToUint=function(e){for(var n=unescape(encodeURIComponent(e)),r=n.split(""),a=new Array,c=0;c<r.length;c++)a.push(r[c].charCodeAt(0));return a},t.prototype.toUint8Array=function(){return new Uint8Array(this.w)},t}(),Yn=function(){function t(e){this.offset=0,this.data=e}return t.prototype.readByte=function(){var e=this.data[this.offset];return this.offset++,e},t.prototype.readNum=function(e){var n=this.data.slice(this.offset,this.offset+e);this.offset+=e;for(var r=new Et(0),a=0;a<n.length;a++){var c=new Et(2).pow(new Et((n.length-a-1)*8));r=r.plus(new Et(n[a]).multipliedBy(c))}return r},t.prototype.readInt64=function(){return this.readNum(8)},t.prototype.readInt16=function(){return Number(this.readNum(2))},t.prototype.readInt32=function(){return Number(this.readNum(4))},t.prototype.readString=function(){var e=this.readInt16();if(e<=0)return"";var n=this.data.slice(this.offset,this.offset+e);return this.offset+=e,this.uintToString(Array.from(n))},t.prototype.readRemaining=function(){var e=this.data.slice(this.offset);return this.offset=this.data.length,e},t.prototype.uintToString=function(e){var n=String.fromCharCode.apply(null,e),r=decodeURIComponent(escape(n));return r},t.prototype.readVariableLength=function(){for(var e=0,n=0;e<27;){var r=this.readByte();if(n=n|(r&127)<<e,(r&128)==0)break;e+=7}return n},t}(),mt=function(){function t(){this.deviceID=2}return t.shared=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.signalDecrypt=function(e,n){return it(this,void 0,void 0,function(){return st(this,function(r){return[2,n.buffer]})})},t.prototype.signalEncrypt=function(e,n){return it(this,void 0,void 0,function(){return st(this,function(r){return[2,n]})})},t.prototype.stringToUint=function(e){for(var n=e.split(""),r=new Array,a=0,c=n;a<c.length;a++){var x=c[a];r.push(x.charCodeAt(0))}return r},t.prototype.encryption=function(e){var n=Ze.AES.encrypt(Ze.enc.Utf8.parse(e),Ze.enc.Utf8.parse(this.aesKey),{keySize:16,iv:Ze.enc.Utf8.parse(this.aesIV),mode:Ze.mode.CBC,padding:Ze.pad.Pkcs7}),r=n.toString();return r},t.prototype.decryption=function(e){var n=this.uintToString(Array.from(e)),r=Ze.enc.Base64.parse(n),a=Ze.AES.decrypt(Ze.enc.Base64.stringify(r),Ze.enc.Utf8.parse(this.aesKey),{keySize:128/8,iv:Ze.enc.Utf8.parse(this.aesIV),mode:Ze.mode.CBC,padding:Ze.pad.Pkcs7});return Uint8Array.from(kt.Buffer.from(a.toString(Ze.enc.Utf8)))},t.prototype.encryption2=function(e){var n=String.fromCharCode.apply(null,Array.from(e)),r=decodeURIComponent(escape(n));return this.encryption(r)},t.prototype.uintToString=function(e){var n=String.fromCharCode.apply(null,e);return n},t}(),Tt=0,pe;(function(t){t[t.Reserved=0]="Reserved",t[t.CONNECT=1]="CONNECT",t[t.CONNACK=2]="CONNACK",t[t.SEND=3]="SEND",t[t.SENDACK=4]="SENDACK",t[t.RECV=5]="RECV",t[t.RECVACK=6]="RECVACK",t[t.PING=7]="PING",t[t.PONG=8]="PONG",t[t.DISCONNECT=9]="DISCONNECT",t[t.SUB=10]="SUB",t[t.SUBACK=11]="SUBACK"})(pe||(pe={}));var Ct=function(){function t(){this.receiptEnabled=!1,this.topic=!1,this._streamOn=!1,this._streamNo=""}return Object.defineProperty(t.prototype,"streamNo",{get:function(){return this._streamNo},set:function(e){e&&e!==""?this._streamOn=!0:this._streamOn=!1,this._streamNo=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"streamOn",{get:function(){return this._streamOn},enumerable:!0,configurable:!0}),t.prototype.toUint8=function(){return this.boolToInt(this.receiptEnabled)<<7|this.boolToInt(this.topic)<<3|this.boolToInt(this.streamOn)<<1},t.fromUint8=function(e){var n=new t;return n.receiptEnabled=(e>>7&1)>0,n.topic=(e>>3&1)>0,n._streamOn=(e>>1&1)>0,n},t.prototype.boolToInt=function(e){return e?1:0},t}(),ot=function(){function t(){this._packetType=pe.Reserved}return t.prototype.from=function(e){this.noPersist=e.noPersist,this.reddot=e.reddot,this.syncOnce=e.syncOnce,this.dup=e.dup,this.remainingLength=e.remainingLength,this._packetType=e._packetType},Object.defineProperty(t.prototype,"packetType",{get:function(){return this._packetType},set:function(e){this._packetType=e},enumerable:!0,configurable:!0}),t}(),Zn=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"packetType",{get:function(){return pe.CONNECT},enumerable:!0,configurable:!0}),e}(ot),er=function(t){qe(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.reasonCode=0,n}return Object.defineProperty(e.prototype,"packetType",{get:function(){return pe.CONNACK},enumerable:!0,configurable:!0}),e}(ot),tr=function(t){qe(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.reasonCode=0,n}return Object.defineProperty(e.prototype,"packetType",{get:function(){return pe.DISCONNECT},enumerable:!0,configurable:!0}),e}(ot),fn=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"packetType",{get:function(){return pe.SEND},enumerable:!0,configurable:!0}),e.prototype.veritifyString=function(n){var r,a=this.uint8ArrayToString(n);return""+this.clientSeq+this.clientMsgNo+((r=this.channelID)!==null&&r!==void 0?r:"")+this.channelType+a},e.prototype.uint8ArrayToString=function(n){var r=String.fromCharCode.apply(null,Array.from(n)),a=decodeURIComponent(escape(r));return a},e}(ot),$t;(function(t){t[t.START=0]="START",t[t.ING=1]="ING",t[t.END=2]="END"})($t||($t={}));var In=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"packetType",{get:function(){return pe.RECV},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"veritifyString",{get:function(){var n,r,a=this.uint8ArrayToString(this.payload);return""+this.messageID+this.messageSeq+this.clientMsgNo+this.timestamp+((n=this.fromUID)!==null&&n!==void 0?n:"")+((r=this.channelID)!==null&&r!==void 0?r:"")+this.channelType+a},enumerable:!0,configurable:!0}),e.prototype.uint8ArrayToString=function(n){var r=String.fromCharCode.apply(null,Array.from(n)),a=decodeURIComponent(escape(r));return a},e}(ot),An=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"packetType",{get:function(){return pe.PING},enumerable:!0,configurable:!0}),e}(ot),nr=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"packetType",{get:function(){return pe.PONG},enumerable:!0,configurable:!0}),e}(ot),Mn=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"packetType",{get:function(){return pe.SENDACK},enumerable:!0,configurable:!0}),e}(ot),Bn=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"packetType",{get:function(){return pe.RECVACK},enumerable:!0,configurable:!0}),e}(ot),rr=function(t){qe(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.action=0,n}return Object.defineProperty(e.prototype,"packetType",{get:function(){return pe.SUB},enumerable:!0,configurable:!0}),e}(ot),ir=function(t){qe(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.action=0,n}return Object.defineProperty(e.prototype,"packetType",{get:function(){return pe.SUBACK},enumerable:!0,configurable:!0}),e}(ot),sr=function(){function t(){this.packetEncodeMap={},this.packetDecodeMap={},this.packetEncodeMap[pe.CONNECT]=this.encodeConnect,this.packetEncodeMap[pe.SEND]=this.encodeSend,this.packetEncodeMap[pe.RECVACK]=this.encodeRecvack,this.packetEncodeMap[pe.SUB]=this.encodeSub,this.packetDecodeMap[pe.CONNACK]=this.decodeConnect,this.packetDecodeMap[pe.RECV]=this.decodeRecvPacket,this.packetDecodeMap[pe.SENDACK]=this.decodeSendackPacket,this.packetDecodeMap[pe.DISCONNECT]=this.decodeDisconnect,this.packetDecodeMap[pe.SUBACK]=this.decodeSuback}return t.prototype.encode=function(e){var n=new Bt,r;if(e.packetType!==pe.PING&&e.packetType!==pe.PONG){var a=this.packetEncodeMap[e.packetType];r=a(e);var c=this.encodeFramer(e,r.length);n.writeBytes(c),n.writeBytes(r)}else{var c=this.encodeFramer(e,0);n.writeBytes(c)}return n.toUint8Array()},t.prototype.decode=function(e){var n=new Yn(e),r=this.decodeFramer(n);if(r.packetType===pe.PING)return new An;if(r.packetType===pe.PONG)return new nr;var a=this.packetDecodeMap[r.packetType];return a==null&&console.log("ä¸æ¯æçåè®®å->",r.packetType),a(r,n)},t.prototype.encodeConnect=function(e){var n=new Bt;return n.writeUint8(e.version),n.writeUint8(e.deviceFlag),n.writeString(e.deviceID),n.writeString(e.uid),n.writeString(e.token),n.writeInt64(new Et(e.clientTimestamp)),n.writeString(e.clientKey),n.w},t.prototype.encodeSend=function(e){var n=new Bt;n.writeByte(e.setting.toUint8()),n.writeInt32(e.clientSeq),(!e.clientMsgNo||e.clientMsgNo==="")&&(e.clientMsgNo=or()),n.writeString(e.clientMsgNo),e.setting.streamOn&&n.writeString(e.streamNo),n.writeString(e.channelID),n.writeByte(e.channelType),Tt>=3&&n.writeInt32(e.expire||0);var r=Uint8Array.from(n.stringToUint(mt.shared().encryption2(e.payload))),a=mt.shared().encryption(e.veritifyString(r));n.writeString(Yt.init(a));var c=e.setting;return c.topic&&n.writeString(e.topic||""),r&&n.writeBytes(Array.from(r)),n.w},t.prototype.encodeSub=function(e){var n=new Bt;return n.writeByte(e.setting),n.writeString(e.clientMsgNo),n.writeString(e.channelID),n.writeByte(e.channelType),n.writeByte(e.action),n.writeString(e.param||""),n.w},t.prototype.decodeSuback=function(e,n){var r=new ir;return r.from(e),r.clientMsgNo=n.readString(),r.channelID=n.readString(),r.channelType=n.readByte(),r.action=n.readByte(),r.reasonCode=n.readByte(),r},t.prototype.encodeRecvack=function(e){var n=new Bt;return n.writeInt64(new Et(e.messageID)),n.writeInt32(e.messageSeq),n.w},t.prototype.decodeConnect=function(e,n){var r=new er;return r.from(e),e.hasServerVersion&&(r.serverVersion=n.readByte(),Tt=r.serverVersion,console.log("æå¡å¨åè®®çæ¬:",Tt)),r.timeDiff=n.readInt64(),r.reasonCode=n.readByte(),r.serverKey=n.readString(),r.salt=n.readString(),r.serverVersion>=4&&(r.nodeId=n.readInt64()),r},t.prototype.decodeDisconnect=function(e,n){var r=new tr;return r.from(e),r.reasonCode=n.readByte(),r.reason=n.readString(),r},t.prototype.decodeRecvPacket=function(e,n){var r=new In;r.from(e),r.setting=Ct.fromUint8(n.readByte()),r.msgKey=n.readString(),r.fromUID=n.readString(),r.channelID=n.readString(),r.channelType=n.readByte(),Tt>=3&&(r.expire=n.readInt32()),r.clientMsgNo=n.readString(),r.setting.streamOn&&(r.streamFlag=n.readByte(),r.streamNo=n.readString(),r.streamId=n.readInt64().toString()),r.messageID=n.readInt64().toString(),r.messageSeq=n.readInt32(),r.timestamp=n.readInt32();var a=r.setting;return a.topic&&(r.topic=n.readString()),r.payload=n.readRemaining(),r},t.prototype.decodeSendackPacket=function(e,n){var r=new Mn;return r.from(e),r.messageID=n.readInt64(),r.clientSeq=n.readInt32(),r.messageSeq=n.readInt32(),r.reasonCode=n.readByte(),r},t.prototype.encodeFramer=function(e,n){if(e.packetType===pe.PING||e.packetType===pe.PONG)return[e.packetType<<4|0];var r=new Array,a=this.encodeBool(e.dup)<<3|this.encodeBool(e.syncOnce)<<2|this.encodeBool(e.reddot)<<1|this.encodeBool(e.noPersist);r.push(e.packetType<<4|a);var c=this.encodeVariableLength(n);return r.push.apply(r,c),r},t.prototype.decodeFramer=function(e){var n=e.readByte(),r=new ot;return r.noPersist=(n&1)>0,r.reddot=(n>>1&1)>0,r.syncOnce=(n>>2&1)>0,r.dup=(n>>3&1)>0,r.packetType=n>>4,r.packetType!=pe.PING&&r.packetType!=pe.PONG&&(r.remainingLength=e.readVariableLength()),r.packetType===pe.CONNACK&&(r.hasServerVersion=(n&1)>0),r},t.prototype.encodeBool=function(e){return e?1:0},t.prototype.encodeVariableLength=function(e){for(var n=new Array;e>0;){var r=e%128;e=Math.floor(e/128),e>0&&(r|=128),n.push(r)}return n},t}();function or(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t=="x"?e:e&3|8;return n.toString(16)})}var Lt=function(){function t(e){if(!e)throw new TypeError("Invalid argument; `value` has no value.");this.value=t.EMPTY,e&&t.isGuid(e)&&(this.value=e)}return t.isGuid=function(e){var n=e.toString();return e&&(e instanceof t||t.validator.test(n))},t.create=function(){return new t([t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-"))},t.createEmpty=function(){return new t("emptyguid")},t.parse=function(e){return new t(e)},t.raw=function(){return[t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-")},t.gen=function(e){for(var n="",r=0;r<e;r++)n+=((1+Math.random())*65536|0).toString(16).substring(1);return n},t.prototype.equals=function(e){return t.isGuid(e)&&this.value===e.toString()},t.prototype.isEmpty=function(){return this.value===t.EMPTY},t.prototype.toString=function(){return this.value},t.prototype.toJSON=function(){return{value:this.value}},t.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t.EMPTY="00000000-0000-0000-0000-000000000000",t}(),Rt;function ar(){if(typeof uni<"u")return console.log("UniAppè¿è¡ç¯å¢"),Rt=uni.connectSocket,uni;if(typeof wx<"u")return console.log("å°ç¨åºè¿è¡ç¯å¢"),Rt=wx.connectSocket,wx;console.log("webè¿è¡ç¯å¢")}var fr=function(){function t(e,n){this.destory=!1,this.addr=e,n?this.platform=n:this.platform=ar(),Rt?this.ws=Rt({url:e,success:function(){console.log("æå¼websocketæå")},fail:function(){console.log("æå¼websocketå¤±è´¥")},complete:function(){}}):(console.log("ä½¿ç¨åçwebsocket"),this.ws=new WebSocket(this.addr),this.ws.binaryType="arraybuffer"),console.log("websocket",this.ws)}return t.prototype.onopen=function(e){var n=this;this.platform?this.ws.onOpen(function(){n.destory||e&&e()}):this.ws.onopen=function(){n.destory||e&&e()}},t.prototype.onmessage=function(e){var n=this;this.platform?this.ws.onMessage(function(r){n.destory||e&&e(r.data)}):this.ws.onmessage=function(r){n.destory||e&&e(r.data)}},t.prototype.onclose=function(e){var n=this;this.platform?this.ws.onClose(function(r){n.destory||e&&e(r)}):this.ws.onclose=function(r){n.destory||e&&e(r)}},t.prototype.onerror=function(e){var n=this;this.platform?this.ws.onError(function(r){e&&e(r)}):this.ws.onerror=function(r){n.destory||e&&e(r)}},t.prototype.send=function(e){if(this.platform)e instanceof Uint8Array?this.ws.send({data:e.buffer}):this.ws.send({data:e});else{if(this.ws.readyState!==WebSocket.OPEN){console.log("wså°æªè¿æ¥ï¼æ æ³åéæ¶æ¯: ",this.ws.readyState);return}this.ws.send(e)}},t.prototype.close=function(){this.destory=!0,this.ws.close()},t}(),Je;(function(t){t[t.Disconnect=0]="Disconnect",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.ConnectFail=3]="ConnectFail",t[t.ConnectKick=4]="ConnectKick"})(Je||(Je={}));var hr=function(){function t(){this.nodeId=0}return t}(),cr=function(){function t(){this.status=Je.Disconnect,this.connectStatusListeners=new Array,this.connectDelayListeners=new Array,this.lockReconnect=!1,this.pongRespTimeoutInterval=3e3,this.needReconnect=!0,this.pingRetryCount=0,this.pingMaxRetryCount=3,this.tempBufferData=new Array,this.sendPacketQueue=[],this.pingTime=0}return t.shared=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.stopHeart=function(){this.heartTimer&&(clearInterval(this.heartTimer),this.heartTimer=null)},t.prototype.stopReconnectTimer=function(){this.reConnectTimeout&&(clearTimeout(this.reConnectTimeout),this.reConnectTimeout=null)},t.prototype.restHeart=function(){var e=this,n=this;this.heartTimer&&clearInterval(this.heartTimer),this.pongRespTimer&&clearTimeout(this.pongRespTimer),this.heartTimer=setInterval(function(){n.sendPing(),n.pingRetryCount>n.pingMaxRetryCount?(e.notifyConnectDelayListeners(9999),console.log("pingæ²¡æååºï¼æ­å¼è¿æ¥ã"),n.onlyDisconnect(),e.status===Je.Disconnect&&n.connect()):n.pingRetryCount>1&&console.log("ç¬¬"+n.pingRetryCount+"æ¬¡ï¼å°è¯pingã")},Q.shared().config.heartbeatInterval)},t.prototype.connect=function(){this.needReconnect=!0,this.onlyConnect()},t.prototype.onlyConnect=function(){var e=this;if(this.status===Je.Connecting){console.log("å·²å¨è¿æ¥ä¸­ï¼ä¸åè¿è¡è¿æ¥.");return}if(Q.shared().config.provider.connectAddrCallback!=null){var n=Q.shared().config.provider.connectAddrCallback;n(function(r){e.connectWithAddr(r)})}else this.connectWithAddr(Q.shared().config.addr)},t.prototype.connectWithAddr=function(e){var n=this;this.status=Je.Connecting,this.ws=new fr(e,Q.shared().config.platform);var r=this;this.ws.onopen(function(){var a;console.log("onopen..."),r.tempBufferData=new Array;var c=Uint8Array.from(r.stringToUint(Lt.create().toString().replace(/-/g,""))),x=an.generateKeyPair(c),l=kt.Buffer.from(x.public).toString("base64");r.dhPrivateKey=x.private;var N=new Zn;N.clientKey=l,N.version=Q.shared().config.protoVersion,N.deviceFlag=Q.shared().config.deviceFlag;var T=Lt.create().toString().replace(/-/g,"");N.deviceID=T+"W",N.clientTimestamp=new Date().getTime(),N.uid=Q.shared().config.uid||"",N.token=Q.shared().config.token||"";var _=r.getProto().encode(N);(a=r.ws)===null||a===void 0||a.send(_)}),this.ws.onmessage(function(a){r.unpacket(new Uint8Array(a),function(c){if(c.length>0)for(var x=0,l=c;x<l.length;x++){var N=l[x];r.onPacket(new Uint8Array(N))}})}),this.ws.onclose(function(a){console.log("è¿æ¥å³é­ï¼",a),n.status!==Je.Disconnect&&(n.status=Je.Disconnect,n.notifyConnectStatusListeners(0)),r.needReconnect&&n.reConnect()}),this.ws.onerror(function(a){console.log("è¿æ¥åºéï¼",a),n.status!==Je.Disconnect&&(n.status=Je.Disconnect,n.notifyConnectStatusListeners(0)),r.needReconnect&&n.reConnect()})},t.prototype.stringToUint=function(e){for(var n=unescape(encodeURIComponent(e)),r=n.split(""),a=new Array,c=0;c<r.length;c++)a.push(r[c].charCodeAt(0));return a},t.prototype.connected=function(){return this.status==Je.Connected},t.prototype.disconnect=function(){this.needReconnect=!1,console.log("æ­å¼ä¸åéè¿"),this.onlyDisconnect()},t.prototype.onlyDisconnect=function(){this.stopHeart(),this.stopReconnectTimer(),this.ws&&this.ws.close(),this.status=Je.Disconnect},t.prototype.reConnect=function(){var e=this;if(!this.lockReconnect){console.log("å¼å§éè¿"),this.lockReconnect=!0,this.reConnectTimeout&&clearTimeout(this.reConnectTimeout);var n=this;this.reConnectTimeout=setTimeout(function(){e.ws&&(e.ws.close(),e.ws=void 0),n.onlyConnect(),e.lockReconnect=!1},3e3)}},t.prototype.wssend=function(e){var n;(n=this.ws)===null||n===void 0||n.send(this.getProto().encode(e))},t.prototype.unpacket=function(e,n){var r;try{(r=this.tempBufferData).push.apply(r,Array.from(e));var a=void 0,c=void 0,x=new Array;do a=this.tempBufferData.length,this.tempBufferData=this.unpackOne(this.tempBufferData,function(l){x.push(l)}),c=this.tempBufferData.length,c>0&&console.log("æç²åï¼-->",this.tempBufferData);while(a!=c&&c>=1);x.length>0&&n(x)}catch(l){console.log("è§£ç æ°æ®å¼å¸¸---->",l),this.reConnect()}},t.prototype.unpackOne=function(e,n){var r=e[0],a=r>>4;if(a==pe.PONG)return n([r]),e.slice(1);var c=e.length,x=1,l=x,N=0,T=0,_=1,te=!1,ne=!0;do{if(l>c-1){ne=!1;break}N=e[l++],T+=(N&127)*_,_*=128,te=(N&128)!=0}while(te);if(!ne)return console.log("åçå©ä½é¿åº¦çé¿åº¦ä¸å¤å®æ´ï¼"),e;var q=l-x;if(x+q+T>c)return console.log("è¿æåæªå°ï¼å­å¥ç¼å­ï¼ï¼ï¼"),e;if(x+q+T==c)return n(e),[];var V=x+q+T;return console.log("ç²å  å¤§äº1ä¸ªå","ï¼packetLength:",V,"length:",c),n(e.slice(0,V)),e.slice(V)},t.prototype.onPacket=function(e){var n=this.getProto().decode(e);if(n.packetType===pe.CONNACK){var r=n;if(r.reasonCode===1){console.log("æåè¿æ¥å°èç¹["+r.nodeId+"]"),Q.shared().channelManager.reSubscribe(),this.status=Je.Connected,this.pingRetryCount=0,this.restHeart();var a=Uint8Array.from(kt.Buffer.from(r.serverKey,"base64")),c=an.sharedKey(this.dhPrivateKey,a),x=kt.Buffer.from(c).toString("base64"),l=Yt.init(x);mt.shared().aesKey=l.substring(0,16),r.salt&&r.salt.length>16?mt.shared().aesIV=r.salt.substring(0,16):mt.shared().aesIV=r.salt,Q.shared().chatManager.flushSendingQueue()}else console.log("è¿æ¥å¤±è´¥ï¼éè¯¯->",r.reasonCode),this.status=Je.ConnectFail,this.needReconnect=!1;this.notifyConnectStatusListeners(r.reasonCode,r)}else if(n.packetType===pe.PONG)this.pingRetryCount=0,this.notifyConnectDelayListeners(Date.now()-this.pingTime);else if(n.packetType===pe.DISCONNECT){var N=n;console.log("è¿æ¥è¢«è¸¢->",N),this.status=Je.ConnectKick,this.needReconnect=!1,this.notifyConnectStatusListeners(N.reasonCode)}else if(n.packetType===pe.SUBACK){var T=n;console.log("è®¢éåæ§-->",T.action),Q.shared().channelManager.handleSuback(T)}Q.shared().chatManager.onPacket(n)},t.prototype.sendPing=function(){this.pingRetryCount++,this.pingTime=Date.now(),this.sendPacket(new An)},t.prototype.sendPacket=function(e){this.send(this.getProto().encode(e))},t.prototype.send=function(e){var n;(n=this.ws)===null||n===void 0||n.send(e)},t.prototype.getProto=function(){return Q.shared().config.proto},t.prototype.addConnectStatusListener=function(e){this.connectStatusListeners.push(e)},t.prototype.removeConnectStatusListener=function(e){for(var n=this.connectStatusListeners.length,r=0;r<n;r++)if(e===this.connectStatusListeners[r]){this.connectStatusListeners.splice(r,1);return}},t.prototype.addConnectDelayListener=function(e){this.connectDelayListeners.push(e)},t.prototype.removeConnectDelayListener=function(e){for(var n=this.connectDelayListeners.length,r=0;r<n;r++)if(e===this.connectDelayListeners[r]){this.connectDelayListeners.splice(r,1);return}},t.prototype.notifyConnectStatusListeners=function(e,n){var r=this;this.connectStatusListeners&&this.connectStatusListeners.forEach(function(a){if(a){var c=new hr;n&&n.nodeId&&(c.nodeId=n.nodeId.toNumber()),a(r.status,e,c)}})},t.prototype.notifyConnectDelayListeners=function(e){this.connectDelayListeners&&this.connectDelayListeners.forEach(function(n){n&&n(e)})},t.prototype.sendRecvackPacket=function(e){var n,r=new Bn;r.messageID=e.messageID,r.messageSeq=e.messageSeq,(n=this.ws)===null||n===void 0||n.send(this.getProto().encode(r))},t.prototype.close=function(){var e;(e=this.ws)===null||e===void 0||e.close()},t}(),hn=7,xt=function(){function t(e,n){this.channelID=e,this.channelType=n}return t.prototype.getChannelKey=function(){return this.channelID+"-"+this.channelType},t.fromChannelKey=function(e){var n=e.split("-");if(n.length>=2){var r=parseInt(n[1],0);return new t(n[0],r)}},t.prototype.isEqual=function(e){return this.channelID===e.channelID&&this.channelType===e.channelType},t}();function cn(t){var e=0;if(t&&t.length>0){var n=String.fromCharCode.apply(null,Array.from(t)),r=decodeURIComponent(escape(n)),a=JSON.parse(r);a&&(e=a.type)}var c=Un.shared().getMessageContent(e);return t&&t.length>0&&c.decode(t),c}var ur=function(){function t(){}return t}(),Pt;(function(t){t[t.Wait=0]="Wait",t[t.Normal=1]="Normal",t[t.Fail=2]="Fail"})(Pt||(Pt={}));var zt=function(){function t(e){this.header=new ur,this.setting=new Ct,this.voicePlaying=!1,this.voiceReaded=!1,this.isDeleted=!1,this.remoteExtra=new lr,e&&(this.header.reddot=e.reddot,this.header.dup=e.dup,this.header.noPersist=e.noPersist,this.header.syncOnce=e.syncOnce,this.setting=e.setting,this.messageID=e.messageID,this.messageSeq=e.messageSeq,this.clientMsgNo=e.clientMsgNo,this.streamFlag=e.streamFlag,this.streamNo=e.streamNo,this.streamId=e.streamId,this.fromUID=e.fromUID,this.channel=new xt(e.channelID,e.channelType),this.timestamp=e.timestamp,this.content=cn(e.payload),this.status=Pt.Normal)}return t.fromSendPacket=function(e,n){var r=new t;return r.header.reddot=!0,r.setting=e.setting,r.clientMsgNo=e.clientMsgNo,r.streamNo=e.streamNo,r.clientSeq=e.clientSeq,r.fromUID=e.fromUID,r.channel=new xt(e.channelID,e.channelType),n?r.content=n:r.content=cn(e.payload),r.timestamp=parseInt((new Date().getTime()/1e3).toString()),r.status=Pt.Wait,r},Object.defineProperty(t.prototype,"send",{get:function(){return this.fromUID===Q.shared().config.uid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentType",{get:function(){return this.content.contentType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"streamOn",{get:function(){return!!(this.streamNo&&this.streamNo!=="")},enumerable:!0,configurable:!0}),t}(),lr=function(){function t(){this.readedCount=0,this.unreadCount=0,this.revoke=!1,this.editedAt=0,this.isEdit=!1,this.extra={},this.extraVersion=0}return t}(),pr=function(){function t(){}return t}(),vt=function(){function t(){}return Object.defineProperty(t.prototype,"contentType",{get:function(){return this._contentType},set:function(e){this._contentType=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"conversationDigest",{get:function(){return this._conversationDigest},set:function(e){this._conversationDigest=e},enumerable:!0,configurable:!0}),t.prototype.encode=function(){var e=this.encodeJSON();if(e.type=this.contentType,this.mention){var n={};this.mention.all&&(n.all=1),this.mention.uids&&(n.uids=this.mention.uids),e.mention=n}this.reply&&(e.reply=this.reply.encode());var r=JSON.stringify(e);return Dn(r)},t.prototype.decode=function(e){var n=Fn(e),r=JSON.parse(n);this.contentObj=r,r&&(this._contentType=r.type);var a=r.mention;if(a){var c=new pr;c.all=a.all===1,a.uids&&(c.uids=a.uids),this.mention=c}var x=r.reply;if(x){var l=new yr;l.decode(x),this.reply=l}this.visibles=r.visibles,this.invisibles=r.invisibles,this.decodeJSON(r)},t.prototype.isVisiable=function(e){if(this.visibles&&this.visibles.length>0){var n=this.visibles.includes(e);if(!n)return!1}if(this.invisibles&&this.invisibles.length>0){var n=this.invisibles.includes(e);if(n)return!1}return!0},t.prototype.decodeJSON=function(e){},t.prototype.encodeJSON=function(){return{}},t}();function Dn(t){for(var e=unescape(encodeURIComponent(t)),n=new Array,r=0,a=e.length;r<a;++r)n.push(e.charCodeAt(r));var c=new Uint8Array(n);return c}function Fn(t){var e=String.fromCharCode.apply(null,Array.from(t)),n=decodeURIComponent(escape(e));return n}var Zt=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.dealFile=function(){},e}(vt),dr=function(){function t(){this.online=!1,this.lastOffline=0}return t}(),un=function(){function t(){this._logicUnread=0,this.timestamp=0,this._reminders=new Array,this.simpleReminders=new Array}return Object.defineProperty(t.prototype,"channelInfo",{get:function(){return Q.shared().channelManager.getChannelInfo(this.channel)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e?e.channel.getChannelKey()===this.channel.getChannelKey():!1},Object.defineProperty(t.prototype,"isMentionMe",{get:function(){return this._isMentionMe===void 0&&this.reloadIsMentionMe(),this._isMentionMe},set:function(e){this._isMentionMe=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remoteExtra",{get:function(){return this._remoteExtra?this._remoteExtra:(this._remoteExtra=new gr,this._remoteExtra.channel=this.channel,this._remoteExtra)},set:function(e){this._remoteExtra=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logicUnread",{get:function(){return this.remoteExtra.browseTo>0&&this.lastMessage&&this.remoteExtra.browseTo<=this.lastMessage.messageSeq?this.lastMessage.messageSeq-this.remoteExtra.browseTo:this.unread},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reminders",{get:function(){return this._reminders},set:function(e){this._reminders=e;var n=new Array;if(e&&e.length>0)for(var r=0,a=e;r<a.length;r++){var c=a[r];if(!c.done){for(var x=!1,l=0,N=0,T=n;N<T.length;N++){var _=T[N];if(c.reminderType===_.reminderType){x=!0;break}l++}x?n[l]=c:n.push(c)}}this.simpleReminders=n},enumerable:!0,configurable:!0}),t.prototype.reloadIsMentionMe=function(){if(this.lastMessage&&this.lastMessage.content){var e=this.lastMessage.content.mention;e&&(e.all&&(this._isMentionMe=!0),e.uids&&e.uids.includes(Q.shared().config.uid||"")&&(this._isMentionMe=!0))}this._isMentionMe||(this._isMentionMe=!1)},t}(),gr=function(){function t(){}return t}(),yr=function(){function t(){}return t.prototype.encode=function(){var e={message_id:this.messageID,message_seq:this.messageSeq,from_uid:this.fromUID,from_name:this.fromName};if(this.rootMessageID&&(e.root_message_id=this.rootMessageID),this.content)try{e.payload=JSON.parse(Fn(this.content.encode()))}catch(n){console.error(n)}return e},t.prototype.decode=function(e){if(this.messageID=e.message_id,this.messageSeq=e.message_seq,this.fromUID=e.from_uid,this.fromName=e.from_name,this.rootMessageID=e.root_message_id,e.payload){var n=e.payload.type,r=Q.shared().getMessageContent(n),a=Dn(JSON.stringify(e.payload));r.decode(a),this.content=r}},t}(),ln;(function(t){t[t.ReminderTypeMentionMe=1]="ReminderTypeMentionMe",t[t.ReminderTypeApplyJoinGroup=2]="ReminderTypeApplyJoinGroup"})(ln||(ln={}));var pn;(function(t){t[t.Down=0]="Down",t[t.Up=1]="Up"})(pn||(pn={}));var Un=function(){function t(){this.contentMap=new Map}return t.shared=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.register=function(e,n){this.contentMap.set(e,n)},t.prototype.registerFactor=function(e){this.factor=e},t.prototype.getMessageContent=function(e){var n=this.contentMap.get(e);if(n){var r=n(e);if(r)return r}var a=this.factor(e);return a||new wr},t}(),dn=function(t){qe(e,t);function e(n){var r=t.call(this)||this;return r.text=n,r}return Object.defineProperty(e.prototype,"conversationDigest",{get:function(){return this.text||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentType",{get:function(){return ut.text},enumerable:!0,configurable:!0}),e.prototype.decodeJSON=function(n){this.text=n.content},e.prototype.encodeJSON=function(){return{content:this.text||""}},e}(vt),xr=function(t){qe(e,t);function e(n,r,a){var c=t.call(this)||this;return c.file=n,c.width=r||0,c.height=a||0,c}return Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(n){this._url=n,this.remoteUrl=n},enumerable:!0,configurable:!0}),e.prototype.decodeJSON=function(n){this.width=n.width||0,this.height=n.height||0,this.url=n.url||"",this.remoteUrl=this.url},e.prototype.encodeJSON=function(){var n=this.remoteUrl;return(!n||n.length===0)&&(n=this.url),{width:this.width||0,height:this.height||0,url:n||""}},Object.defineProperty(e.prototype,"contentType",{get:function(){return ut.image},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"conversationDigest",{get:function(){return"[å¾ç]"},enumerable:!0,configurable:!0}),e}(Zt);(function(t){qe(e,t);function e(n){var r=t.call(this)||this;return r.data=n,r}return Object.defineProperty(e.prototype,"contentType",{get:function(){return ut.stream},enumerable:!0,configurable:!0}),e.prototype.decodeJSON=function(n){var r=n.data;r&&r.length>0&&(this.data=Uint8Array.from(Buffer.from(r,"base64")).buffer)},e.prototype.encodeJSON=function(){var n=Buffer.from(this.data).toString("base64");return{data:n}},e})(vt);var vr=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"contentType",{get:function(){return ut.signalMessage},enumerable:!0,configurable:!0}),e}(vt),wr=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"contentType",{get:function(){return ut.unknown},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"conversationDigest",{get:function(){return"[æªç¥æ¶æ¯]"},enumerable:!0,configurable:!0}),e.prototype.decodeJSON=function(n){this.realContentType=n.type},e}(vt),mr=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.decodeJSON=function(n){this.content=n},Object.defineProperty(e.prototype,"conversationDigest",{get:function(){return this.displayText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){var n=this.content.extra,r=this.content.content;if(n){var a=n;if(a&&a.length>0)for(var c=0;c<=a.length-1;c++){var x=a[c],l=x.name||"";r=r.replace("{"+c+"}",l)}}return r},enumerable:!0,configurable:!0}),e}(vt),br=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.decodeJSON=function(n){this.cmd=n.cmd,this.param=n.param},Object.defineProperty(e.prototype,"contentType",{get:function(){return ut.cmd},enumerable:!0,configurable:!0}),e}(vt),Sr=function(){function t(){}return t}(),ct;(function(t){t[t.subscribe=0]="subscribe",t[t.unsubscribe=1]="unsubscribe"})(ct||(ct={}));var gn;(function(t){t[t.unknown=0]="unknown",t[t.success=1]="success",t[t.authFail=2]="authFail",t[t.subscriberNotExist=3]="subscriberNotExist",t[t.reasonInBlacklist=4]="reasonInBlacklist",t[t.reasonChannelNotExist=5]="reasonChannelNotExist",t[t.reasonUserNotOnNode=6]="reasonUserNotOnNode",t[t.reasonSenderOffline=7]="reasonSenderOffline",t[t.msgKeyError=8]="msgKeyError",t[t.payloadDecodeError=9]="payloadDecodeError",t[t.forwardSendPacketError=10]="forwardSendPacketError",t[t.notAllowSend=11]="notAllowSend",t[t.connectKick=12]="connectKick",t[t.notInWhitelist=13]="notInWhitelist",t[t.queryTokenError=14]="queryTokenError",t[t.systemError=15]="systemError",t[t.channelIDError=16]="channelIDError",t[t.nodeMatchError=17]="nodeMatchError",t[t.nodeNotMatch=18]="nodeNotMatch",t[t.ban=19]="ban",t[t.notSupportHeader=20]="notSupportHeader",t[t.clientKeyIsEmpty=21]="clientKeyIsEmpty",t[t.rateLimit=22]="rateLimit",t[t.notSupportChannelType=23]="notSupportChannelType"})(gn||(gn={}));var yn=function(){function t(e,n,r){this.sending=!1,this.handleOk=!1,this.listener=n,this.options=r,this.action=e}return t}(),xn=function(){function t(e){this.listenerStates=new Array,this.channel=e}return t}(),Er=function(){function t(){}return t.fromMessage=function(e){var n=new t;return n.streamNo=e.streamNo||"",n.streamId=e.streamId,n.channel=e.channel,n.content=e.content,n},t}(),Jt;(function(t){t[t.wait=0]="wait",t[t.success=1]="success",t[t.processing=2]="processing",t[t.fail=3]="fail",t[t.suspend=4]="suspend",t[t.cancel=5]="cancel"})(Jt||(Jt={}));var Cr=function(){function t(){this.taskMap=new Map,this.listeners=new Array}return t.prototype.addTask=function(e){var n=this;this.taskMap.set(e.id,e),e.addListener(function(){n.notifyListeners(e)}),e.start()},t.prototype.removeTask=function(e){var n=this.taskMap.get(e);n&&(n.cancel(),this.taskMap.delete(e))},t.prototype.addListener=function(e){this.listeners.push(e)},t.prototype.removeListener=function(e){for(var n=this.listeners.length,r=0;r<n;r++)if(e===this.listeners[r]){this.listeners.splice(r,1);return}},t.prototype.notifyListeners=function(e){this.listeners&&this.listeners.forEach(function(n){n(e)})},t}(),Ir=function(){function t(){}return t.prototype.start=function(){},t.prototype.suspend=function(){},t.prototype.resume=function(){},t.prototype.cancel=function(){},t.prototype.update=function(){this.listeners&&this.listeners.forEach(function(e){e()})},t.prototype.progress=function(){return 0},t.prototype.addListener=function(e){this.listeners.push(e)},t.prototype.removeListener=function(e){for(var n=this.listeners.length,r=0;r<n;r++)if(e===this.listeners[r]){this.listeners.splice(r,1);return}},Object.defineProperty(t.prototype,"listeners",{get:function(){return this._listeners||(this._listeners=new Array),this._listeners},enumerable:!0,configurable:!0}),t}(),Ar=function(t){qe(e,t);function e(n){var r=t.call(this)||this;return r.id=n.clientMsgNo,r.message=n,r}return e}(Ir),Nn=function(){function t(){this.listeners=new Array}return t.shared=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.addStreamListener=function(e){this.listeners.push(e)},t.prototype.removeStreamListener=function(e){for(var n=this.listeners.length,r=0;r<n;r++)if(e===this.listeners[r]){this.listeners.splice(r,1);return}},t.prototype.notifyStreamListeners=function(e){this.listeners&&this.listeners.forEach(function(n){n&&n(e)})},t}(),Tn=function(){function t(){var e=this;this.cmdListeners=new Array,this.listeners=new Array,this.sendingQueues=new Map,this.sendPacketQueue=[],this.sendStatusListeners=new Array,this.clientSeq=0,Q.shared().taskManager&&Q.shared().taskManager.addListener(function(n){if(n.status===Jt.success&&n instanceof Ar){var r=n,a=e.sendingQueues.get(r.message.clientSeq);a&&(a.payload=r.message.content.encode(),Q.shared().connectManager.sendPacket(a))}})}return t.shared=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.onPacket=function(e){return it(this,void 0,void 0,function(){var n,r,a,c,x;return st(this,function(l){if(e instanceof In){if(n=e,r=mt.shared().encryption(n.veritifyString),a=Yt.init(r),a!==n.msgKey)return console.log("éæ³çæ¶æ¯ï¼ææmsgKey:"+n.msgKey+" å®émsgKey:"+a+" å¿½ç¥æ­¤æ¶æ¯ï¼ï¼"),[2];if(n.payload=mt.shared().decryption(n.payload),c=new zt(n),this.sendRecvackPacket(n),c.contentType===ut.cmd)return this.notifyCMDListeners(c),[2];c.setting.streamOn&&c.streamFlag!==void 0&&c.streamFlag!==$t.START?Nn.shared().notifyStreamListeners(Er.fromMessage(c)):this.notifyMessageListeners(c),Q.shared().channelManager.notifySubscribeIfNeed(c)}else e instanceof Mn&&(x=e,this.sendingQueues.delete(x.clientSeq),this.notifyMessageStatusListeners(x));return[2]})})},t.prototype.syncMessages=function(e,n){return it(this,void 0,void 0,function(){return st(this,function(r){if(!Q.shared().config.provider.syncMessagesCallback)throw new Error("æ²¡æè®¾ç½®WKSDK.shared().config.provider.syncMessagesCallback");return[2,Q.shared().config.provider.syncMessagesCallback(e,n)]})})},t.prototype.syncMessageExtras=function(e,n){return it(this,void 0,void 0,function(){return st(this,function(r){if(!Q.shared().config.provider.syncMessageExtraCallback)throw new Error("æ²¡æè®¾ç½®WKSDK.shared().config.provider.syncMessageExtraCallback");return[2,Q.shared().config.provider.syncMessageExtraCallback(e,n,100)]})})},t.prototype.sendRecvackPacket=function(e){var n=new Bn;n.noPersist=e.noPersist,n.syncOnce=e.syncOnce,n.reddot=e.reddot,n.messageID=e.messageID,n.messageSeq=e.messageSeq,Q.shared().connectManager.sendPacket(n)},t.prototype.send=function(e,n,r){return it(this,void 0,void 0,function(){var a;return st(this,function(c){return a=new vn,a.setting=r||new Ct,[2,this.sendWithOptions(e,n,a)]})})},t.prototype.sendWithOptions=function(e,n,r){return it(this,void 0,void 0,function(){var a,c,x;return st(this,function(l){return a=this.getSendPacketWithOptions(e,n,r),this.sendingQueues.set(a.clientSeq,a),c=zt.fromSendPacket(a,e),e instanceof Zt?e.file?(console.log("å¼å§ä¸ä¼ "),x=Q.shared().config.provider.messageUploadTask(c),x?(console.log("ä¸ä¼ ä»»å¡æ·»å æå"),Q.shared().taskManager.addTask(x)):console.log("æ²¡æå®ç°ä¸ä¼ æ°æ®æº")):(console.log("ä¸éè¦ä¸ä¼ ",e.remoteUrl),this.sendSendPacket(a)):this.sendSendPacket(a),this.notifyMessageListeners(c),[2,c]})})},t.prototype.sendSendPacket=function(e){var n=this;this.sendPacketQueue.push(e),this.sendTimer||(this.sendTimer=setInterval(function(){for(var r=new Array,a=0;n.sendPacketQueue.length>0;){var c=n.sendPacketQueue.shift();if(c){var x=Array.from(Q.shared().config.proto.encode(c));r.push.apply(r,x)}if(a++,a>=Q.shared().config.sendCountOfEach)break}r.length>0&&Q.shared().connectManager.send(new Uint8Array(r))},Q.shared().config.sendFrequency))},t.prototype.getSendPacket=function(e,n,r){r===void 0&&(r=new Ct);var a=new fn;return a.setting=r,a.reddot=!0,a.clientMsgNo=Lt.create().toString().replace(/-/gi,"")+"3",a.streamNo=r.streamNo,a.clientSeq=this.getClientSeq(),a.fromUID=Q.shared().config.uid||"",a.channelID=n.channelID,a.channelType=n.channelType,a.payload=e.encode(),a},t.prototype.getSendPacketWithOptions=function(e,n,r){r===void 0&&(r=new vn);var a=r.setting||new Ct,c=new fn;return c.reddot=r.reddot,c.noPersist=r.noPersist,c.setting=a,c.reddot=!0,c.clientMsgNo=Lt.create().toString().replace(/-/gi,"")+"_"+Q.shared().config.clientMsgDeviceId+"_3",c.streamNo=a.streamNo,c.clientSeq=this.getClientSeq(),c.fromUID=Q.shared().config.uid||"",c.channelID=n.channelID,c.channelType=n.channelType,c.payload=e.encode(),c},t.prototype.getClientSeq=function(){return++this.clientSeq},t.prototype.notifyCMDListeners=function(e){this.cmdListeners&&this.cmdListeners.forEach(function(n){n&&n(e)})},t.prototype.addCMDListener=function(e){this.cmdListeners.push(e)},t.prototype.removeCMDListener=function(e){for(var n=this.cmdListeners.length,r=0;r<n;r++)if(e===this.cmdListeners[r]){this.cmdListeners.splice(r,1);return}},t.prototype.addMessageListener=function(e){this.listeners.push(e)},t.prototype.removeMessageListener=function(e){for(var n=this.listeners.length,r=0;r<n;r++)if(e===this.listeners[r]){this.listeners.splice(r,1);return}},t.prototype.notifyMessageListeners=function(e){this.listeners&&this.listeners.forEach(function(n){n&&n(e)})},t.prototype.notifyMessageStatusListeners=function(e){this.sendStatusListeners&&this.sendStatusListeners.forEach(function(n){n&&n(e)})},t.prototype.addMessageStatusListener=function(e){this.sendStatusListeners.push(e)},t.prototype.removeMessageStatusListener=function(e){for(var n=this.sendStatusListeners.length,r=0;r<n;r++)if(e===this.sendStatusListeners[r]){this.sendStatusListeners.splice(r,1);return}},t.prototype.flushSendingQueue=function(){if(!(this.sendingQueues.size<=0)){console.log("flush åééååçæ¶æ¯ãæ°é"+this.sendingQueues.size);var e=new Array;this.sendingQueues.forEach(function(x,l){e.push(l)}),e=e.sort();for(var n=0,r=e;n<r.length;n++){var a=r[n],c=this.sendingQueues.get(a);c&&(console.log("éè¯æ¶æ¯---->",c),Q.shared().connectManager.sendPacket(c))}}},t.prototype.deleteMessageFromSendingQueue=function(e){this.sendingQueues.delete(e)},t}(),vn=function(){function t(){this.setting=new Ct,this.noPersist=!1,this.reddot=!0}return t}(),Mr=function(){function t(){this.channelInfocacheMap={},this.requestQueueMap=new Map,this.listeners=new Array,this.subscribeCacheMap=new Map,this.requestSubscribeQueueMap=new Map,this.subscriberChangeListeners=new Array,this.deleteChannelInfoListeners=new Array,this.subscriberContexts=new Array,this.subscriberContextTick=0}return t.shared=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.fetchChannelInfo=function(e){return it(this,void 0,void 0,function(){var n,r,a;return st(this,function(c){switch(c.label){case 0:if(n=e.getChannelKey(),r=this.requestQueueMap.get(n),r)return[2];c.label=1;case 1:return c.trys.push([1,,4,5]),this.requestQueueMap.set(n,!0),Q.shared().config.provider.channelInfoCallback==null?[3,3]:[4,Q.shared().config.provider.channelInfoCallback(e)];case 2:a=c.sent(),this.channelInfocacheMap[n]=a,a&&this.notifyListeners(a),c.label=3;case 3:return[3,5];case 4:return this.requestQueueMap.delete(n),[7];case 5:return[2]}})})},t.prototype.syncSubscribes=function(e){return it(this,void 0,void 0,function(){var n,r,a,c,x,l,N,T,_,te,ne,q;return st(this,function(V){switch(V.label){case 0:if(n=e.getChannelKey(),r=this.requestSubscribeQueueMap.get(n),r)return[2];V.label=1;case 1:return V.trys.push([1,,3,4]),this.requestSubscribeQueueMap.set(n,!0),a=this.subscribeCacheMap.get(n),c=0,a&&a.length>0?(x=a[a.length-1],c=x.version):a=new Array,[4,Q.shared().config.provider.syncSubscribersCallback(e,c||0)];case 2:if(l=V.sent(),l&&l.length>0)for(N=0,T=l;N<T.length;N++){for(_=T[N],te=!1,ne=0;ne<a.length;ne++)if(q=a[ne],_.uid===q.uid){te=!0,a[ne]=_;break}te||a.push(_)}return this.subscribeCacheMap.set(n,a),this.notifySubscribeChangeListeners(e),[3,4];case 3:return this.requestSubscribeQueueMap.delete(n),[7];case 4:return[2]}})})},t.prototype.getChannelInfo=function(e){return this.channelInfocacheMap[e.getChannelKey()]},t.prototype.setChannleInfoForCache=function(e){this.channelInfocacheMap[e.channel.getChannelKey()]=e},t.prototype.deleteChannelInfo=function(e){var n=this.channelInfocacheMap[e.getChannelKey()];return delete this.channelInfocacheMap[e.getChannelKey()],n},t.prototype.getSubscribes=function(e){var n=this.subscribeCacheMap.get(e.getChannelKey()),r=new Array;if(n)for(var a=0,c=n;a<c.length;a++){var x=c[a];x.isDeleted||r.push(x)}return r},t.prototype.getSubscribeOfMe=function(e){var n=this.subscribeCacheMap.get(e.getChannelKey());if(n)for(var r=0,a=n;r<a.length;r++){var c=a[r];if(!c.isDeleted&&c.uid===Q.shared().config.uid)return c}return null},t.prototype.addSubscriberChangeListener=function(e){this.subscriberChangeListeners.push(e)},t.prototype.removeSubscriberChangeListener=function(e){for(var n=this.subscriberChangeListeners.length,r=0;r<n;r++)if(e===this.subscriberChangeListeners[r]){this.subscriberChangeListeners.splice(r,1);return}},t.prototype.addDeleteChannelInfoListener=function(e){this.deleteChannelInfoListeners.push(e)},t.prototype.removeDeleteChannelInfoListener=function(e){for(var n=this.deleteChannelInfoListeners.length,r=0;r<n;r++)if(e===this.deleteChannelInfoListeners[r]){this.deleteChannelInfoListeners.splice(r,1);return}},t.prototype.addListener=function(e){this.listeners.push(e)},t.prototype.removeListener=function(e){for(var n=this.listeners.length,r=0;r<n;r++)if(e===this.listeners[r]){this.listeners.splice(r,1);return}},t.prototype.notifySubscribeChangeListeners=function(e){this.subscriberChangeListeners&&this.subscriberChangeListeners.forEach(function(n){n(e)})},t.prototype.notifyListeners=function(e){this.listeners&&this.listeners.forEach(function(n){n(e)})},t.prototype.notifySubscribeIfNeed=function(e){var n=this.getSubscribeContext(e.channel);if(n&&n.listenerStates)for(var r=0,a=n.listenerStates;r<a.length;r++){var c=a[r];c.listener&&c.action===ct.subscribe&&c.listener(e)}},t.prototype.onSubscribe=function(e,n){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var c=new Sr;if(r&&r.length>0)for(var x=0,l=r;x<l.length;x++){var N=l[x];N(c)}var T,_,te=hn;e instanceof xt?(te=e.channelType,_=this.parseChannelURL(e.channelID)):_=this.parseChannelURL(e),T=new xt(_.channelID,te),c.param=_.paramMap;var ne=this.getSubscribeContext(T);ne||(ne=new xn(T),this.subscriberContexts.push(ne));var q=!1;if(ne.listenerStates.length>0)for(var V=0,fe=ne.listenerStates;V<fe.length;V++){var he=fe[V];if(he.action===ct.subscribe){he.handleOk=!1,he.listener=n,he.options=c,q=!0;break}}q||ne.listenerStates.push(new yn(ct.subscribe,n,c)),console.log("onSubscribe-->",ne.listenerStates.length),this.executeSubscribeContext()},t.prototype.parseChannelURL=function(e){var n=e.split("?");if(n.length>1){for(var r=n[1],a=new Map,c=r.split("&"),x=0,l=c;x<l.length;x++){var N=l[x],T=N.split("=");T.length>1&&a.set(T[0],T[1])}return{channelID:n[0],paramMap:a}}else return{channelID:e,paramMap:new Map}},t.prototype.onUnsubscribe=function(e,n){var r,a,c=hn;e instanceof xt?(c=e.channelType,a=this.parseChannelURL(e.channelID)):a=this.parseChannelURL(e),r=new xt(a.channelID,c);var x=this.getSubscribeContext(r);x||(x=new xn(r),this.subscriberContexts.push(x));var l=!1;if(x.listenerStates.length>0)for(var N=0,T=x.listenerStates;N<T.length;N++){var _=T[N];if(_.action===ct.unsubscribe){_.handleOk=!1,_.listener=n,l=!0;break}}l||x.listenerStates.push(new yn(ct.unsubscribe,n)),this.executeSubscribeContext()},t.prototype.reSubscribe=function(){for(var e=0,n=this.subscriberContexts;e<n.length;e++)for(var r=n[e],a=0,c=r.listenerStates;a<c.length;a++){var x=c[a];x.handleOk=!1,x.sending=!1}this.executeSubscribeContext()},t.prototype.handleSuback=function(e){for(var n=0,r=this.subscriberContexts;n<r.length;n++){var a=r[n];if(e.channelID===a.channel.channelID&&e.channelType===a.channel.channelType){if(e.action===ct.subscribe){if(a.listenerStates&&a.listenerStates.length>0)for(var c=0,x=a.listenerStates;c<x.length;c++){var l=x[c];if(!l.handleOk&&(l.handleOk=!0,l.listener&&l.action===ct.subscribe)){var N=l.listener;N(void 0,e.reasonCode)}}}else if(a.listenerStates&&a.listenerStates.length>0)for(var T=0,_=a.listenerStates;T<_.length;T++){var l=_[T];if(!l.handleOk&&(l.handleOk=!0,l.listener&&l.action===ct.unsubscribe)){var te=l.listener;te(e.reasonCode)}}}}if(e.action===ct.unsubscribe)for(var ne=0;ne<this.subscriberContexts.length;ne++){var a=this.subscriberContexts[ne];if(a.channel.channelID===e.channelID&&a.channel.channelType===e.channelType){this.subscriberContexts.splice(ne,1);continue}}},t.prototype.getSubscribeContext=function(e){for(var n=0,r=this.subscriberContexts;n<r.length;n++){var a=r[n];if(a.channel.channelID===e.channelID&&a.channel.channelType===e.channelType)return a}},t.prototype.executeSubscribeContext=function(){for(var e=0,n=this.subscriberContexts;e<n.length;e++){var r=n[e];if(r&&r.listenerStates.length>0)for(var a=0,c=r.listenerStates;a<c.length;a++){var x=c[a];x.handleOk||x.sending||(x.sending=!0,this.sendSubscribe(r.channel,x.action,x.options))}}},t.prototype.sendSubscribe=function(e,n,r){console.log("sendSubscribe---->",n);var a=new rr;a.channelID=e.channelID,a.channelType=e.channelType,a.action=n,r!=null&&r.param&&(a.param=JSON.stringify(Object.fromEntries(r==null?void 0:r.param))),Q.shared().connectManager.sendPacket(a)},t}(),yt;(function(t){t[t.add=0]="add",t[t.update=1]="update",t[t.remove=2]="remove"})(yt||(yt={}));var Qt=function(){function t(){var e=this;this.listeners=new Array,this.conversations=new Array,this.maxExtraVersion=0,this._noUpdateContentType=[],Tn.shared().addMessageListener(function(n){e._noUpdateContentType.indexOf(n.contentType)>=0||e.updateOrAddConversation(n)})}return t.prototype.addNoUpdateContentType=function(e){this._noUpdateContentType.push(e)},t.prototype.removeNoUpdateContentType=function(e){var n=this._noUpdateContentType.indexOf(e);n>=0&&this._noUpdateContentType.splice(n,1)},t.shared=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.sync=function(e){var n=this,r=Q.shared().config.provider.syncConversationsCallback(e);return r&&r.then(function(a){if(n.conversations=a,a.length>0)for(var c=0,x=a;c<x.length;c++){var l=x[c];l.remoteExtra.version>n.maxExtraVersion&&(n.maxExtraVersion=l.remoteExtra.version)}Q.shared().reminderManager.sync()}).catch(function(a){console.log("åæ­¥æè¿ä¼è¯å¤±è´¥ï¼",a)}),r},t.prototype.syncExtra=function(){return it(this,void 0,void 0,function(){var e,n,r,a,c,x,l;return st(this,function(N){switch(N.label){case 0:return Q.shared().config.provider.syncConversationExtrasCallback?[4,Q.shared().config.provider.syncConversationExtrasCallback(this.maxExtraVersion)]:(console.log("syncConversationExtrasCallbackæ²¡ææä¾"),[2]);case 1:if(e=N.sent(),e)for(n=0,r=e;n<r.length;n++)for(a=r[n],a.version>this.maxExtraVersion&&(this.maxExtraVersion=a.version),c=0,x=this.conversations;c<x.length;c++)l=x[c],l.channel.isEqual(a.channel)&&(l.remoteExtra=a,this.notifyConversationListeners(l,yt.update));return[2,e]}})})},t.prototype.findConversation=function(e){if(this.conversations)for(var n=0,r=this.conversations;n<r.length;n++){var a=r[n];if(a.channel.isEqual(e))return a}},t.prototype.findConversations=function(e){if(this.conversations&&this.conversations.length>0){for(var n=new Array,r=0,a=this.conversations;r<a.length;r++)for(var c=a[r],x=0,l=e;x<l.length;x++){var N=l[x];if(c.channel.isEqual(N)){n.push(c);break}}return n}},t.prototype.createEmptyConversation=function(e){var n=this.findConversation(e);if(n)return n.timestamp=new Date().getTime()/1e3,this.notifyConversationListeners(n,yt.update),n;var r=new un;return r.channel=e,r.timestamp=new Date().getTime()/1e3,this.conversations=Vt([r],this.conversations),this.notifyConversationListeners(r,yt.add),r},t.prototype.updateOrAddConversation=function(e){var n=this.findConversation(e.channel),r;n?(!e.send&&e.header.reddot&&(!this.openConversation||!this.openConversation.channel.isEqual(e.channel))&&n.unread++,n.timestamp=e.timestamp,n.lastMessage=e,r=n,this.notifyConversationListeners(r,yt.update)):(r=new un,r.unread=0,r.channel=e.channel,r.timestamp=e.timestamp,!e.send&&e.header.reddot&&(!this.openConversation||!this.openConversation.channel.isEqual(e.channel))&&r.unread++,r.lastMessage=e,this.conversations=Vt([r],this.conversations),this.notifyConversationListeners(r,yt.add))},t.prototype.removeConversation=function(e){if(!(!this.conversations||this.conversations.length===0)){for(var n,r=0;r<this.conversations.length;r++){var a=this.conversations[r];a.channel.isEqual(e)&&(this.conversations.splice(r,1),n=a)}n&&this.notifyConversationListeners(n,yt.remove)}},t.prototype.getAllUnreadCount=function(){var e=0;if(this.conversations)for(var n=0,r=this.conversations;n<r.length;n++){var a=r[n];e+=a.unread}return e},t.prototype.addConversationListener=function(e){this.listeners.push(e)},t.prototype.removeConversationListener=function(e){for(var n=this.listeners.length,r=0;r<n;r++)if(e===this.listeners[r]){this.listeners.splice(r,1);return}},t.prototype.notifyConversationListeners=function(e,n){this.listeners&&this.listeners.forEach(function(r){r&&r(e,n)})},t}(),Br=function(){function t(){this.reminders=new Array}return t.shared=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.sync=function(){return it(this,void 0,void 0,function(){var e,n,r,a,c,x,l,N,T;return st(this,function(_){switch(_.label){case 0:return Q.shared().config.provider.syncRemindersCallback?(e=this.maxReminderVersion(),[4,Q.shared().config.provider.syncRemindersCallback(e)]):(console.log("##########syncRemindersCallback##########"),[2]);case 1:if(n=_.sent(),n&&n.length>0){for(r=new Set,a=0,c=n;a<c.length;a++){for(x=c[a],r.add(x.channel),l=!1,N=0;N<this.reminders.length;N++)if(T=this.reminders[N],x.reminderID===T.reminderID){this.reminders[N]=x,l=!0;break}l||this.reminders.push(x)}this.updateConversations(Array.from(r))}return[2]}})})},t.prototype.done=function(e){return it(this,void 0,void 0,function(){var n,r,a,c,x;return st(this,function(l){if(!Q.shared().config.provider.reminderDoneCallback)return console.log("##########reminderDoneCallback##########"),[2];if(n=this.getRemindersWithIDs(e),n&&n.length>0){for(r=0,a=n;r<a.length;r++)c=a[r],c.done=!0;x=this.getChannelWithReminders(n),this.updateConversations(x)}return[2,Q.shared().config.provider.reminderDoneCallback(e)]})})},t.prototype.getChannelWithReminders=function(e){if(!e||e.length===0)return[];for(var n=new Set,r=0,a=e;r<a.length;r++){var c=a[r];n.add(c.channel)}return Array.from(n)},t.prototype.updateConversations=function(e){var n=Qt.shared().findConversations(e);if(n&&n.length>0)for(var r=0,a=n;r<a.length;r++){var c=a[r];c.reminders=this.getWaitDoneReminders(c.channel),Qt.shared().notifyConversationListeners(c,yt.update)}},t.prototype.getWaitDoneReminders=function(e){for(var n=new Array,r=0,a=this.reminders;r<a.length;r++){var c=a[r];c.channel.isEqual(e)&&n.push(c)}return n},t.prototype.getRemindersWithIDs=function(e){for(var n=new Array,r=0,a=this.reminders;r<a.length;r++)for(var c=a[r],x=0,l=e;x<l.length;x++){var N=l[x];if(c.reminderID===N){n.push(c);break}}return n},t.prototype.maxReminderVersion=function(){for(var e=0,n=0,r=this.reminders;n<r.length;n++){var a=r[n];a.version>e&&(e=a.version)}return e},t}(),Dr=function(){function t(){}return t.prototype.messageUploadTask=function(e){if(this.messageUploadTaskCallback)return this.messageUploadTaskCallback(e)},t}(),Fr=function(){function t(){this.debug=!1,this.protoVersion=4,this.deviceFlag=1,this.proto=new sr,this.heartbeatInterval=6e4,this.receiptFlushInterval=2e3,this.sdkVersion="1.2.8",this.sendFrequency=100,this.sendCountOfEach=5,this.clientMsgDeviceId=0,this.provider=new Dr}return t}(),Ur=function(){function t(){this.listeners=new Array,this.channelMessagesMap=new Map}return t.shared=function(e){return e===void 0&&(e=2e3),this.instance||(this.instance=new t,this.instance.setup(e)),this.instance},t.prototype.setup=function(e){this.timer=setInterval(this.flushLoop.bind(this),e)},t.prototype.addReceiptMessages=function(e,n){if(!(!n||n.length===0)){var r=this.channelMessagesMap.get(e.getChannelKey());r||(r=[]);for(var a=0,c=n;a<c.length;a++){var x=c[a];x.remoteExtra.readed||r.push(x)}this.channelMessagesMap.set(e.getChannelKey(),r)}},t.prototype.flush=function(e){var n=this;if(!Q.shared().config.provider.messageReadedCallback)throw new Error("æ²¡æè®¾ç½®WKSDK.shared().config.provider.messageReadedCallback");var r=this.channelMessagesMap.get(e),a=new Array,c=0;if(r&&r.length>0){c=r.length;for(var x=0,l=r;x<l.length;x++){var N=l[x];a.push(N)}}if(a.length!==0){var T=xt.fromChannelKey(e);Q.shared().config.provider.messageReadedCallback(T,a).then(function(){n.removeCacheWithLength(e,c),n.notifyListeners(T,a)})}},t.prototype.removeCacheWithLength=function(e,n){var r=this.channelMessagesMap.get(e),a=new Array;if(r){for(var c=0,x=r;c<x.length;c++){var l=x[c];a.push(l)}var N=n;a.length<n&&(N=a.length);for(var T=0;T<N;T++)for(var l=a[T],_=0;_<r.length;_++){var te=r[_];if(l.clientMsgNo===te.clientMsgNo){r.splice(_,1);break}}}},t.prototype.flushLoop=function(){var e=this;this.channelMessagesMap.forEach(function(n,r){e.flush(r)})},t.prototype.addListener=function(e){this.listeners.push(e)},t.prototype.removeListener=function(e){for(var n=this.listeners.length,r=0;r<n;r++)if(e===this.listeners[r]){this.listeners.splice(r,1);return}},t.prototype.notifyListeners=function(e,n){this.listeners&&this.listeners.forEach(function(r){r&&r(e,n)})},t}(),Nr=function(){function t(){}return t.shared=function(){return this.instance||(this.instance=new t,this.instance.init()),this.instance},t.prototype.init=function(){var e=this;this.config=new Fr,this.taskManager=new Cr,this.messageContentManager=Un.shared(),this.connectManager=cr.shared(),this.chatManager=Tn.shared(),this.channelManager=Mr.shared(),this.conversationManager=Qt.shared(),this.securityManager=mt.shared(),this.reminderManager=Br.shared(),this.receiptManager=Ur.shared(this.config.receiptFlushInterval),this.streamManager=Nn.shared(),this.registerFactor(function(n){if(e.isSystemMessage(n))return new mr;if(n===ut.cmd)return new br}),this.register(ut.text,function(){return new dn}),this.register(ut.image,function(){return new xr}),this.register(ut.signalMessage,function(){return new vr})},t.prototype.register=function(e,n){this.messageContentManager.register(e,n)},t.prototype.registerFactor=function(e){this.messageContentManager.registerFactor(e)},t.prototype.getMessageContent=function(e){return this.messageContentManager.getMessageContent(e)},t.prototype.isSystemMessage=function(e){return e>=1e3&&e<=2e3},t.prototype.connect=function(){this.connectManager.connect()},t.prototype.disconnect=function(){this.connectManager.disconnect()},t.prototype.onSubscribe=function(e,n){for(var r,a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];(r=this.channelManager).onSubscribe.apply(r,Vt([e,n],a))},t.prototype.onUnsubscribe=function(e,n){this.channelManager.onUnsubscribe(e,n)},t.prototype.newMessageText=function(e){return new dn(e)},t.prototype.newChannel=function(e,n){return new xt(e,n)},t.prototype.newMessage=function(){return new zt},t.prototype.newChannelInfo=function(){return new dr},t.prototype.newMediaMessageContent=function(){return new Zt},t.prototype.newMessageContent=function(){return new vt},t}(),Q=Nr;class Tr extends vt{constructor(){super(...arguments);It(this,"uid");It(this,"nickName");It(this,"pic");It(this,"content")}decodeJSON(n){this.nickName=n.nickName||"UnKnown",this.pic=n.pic||"",this.content=n.content,this.uid=n.uid}encodeJSON(){return{nickName:this.nickName,pic:this.pic,content:this.content,uid:this.uid}}setUserContent(n,r,a,c){this.nickName=n,this.pic=r,this.content=a,this.uid=c,this.encodeJSON()}}const kr=jn(),{appendMessage:Or}=kr,jr=t=>{Q.shared().config.addr="wss://chat.subtrek.net",Q.shared().config.uid=t.uid,Q.shared().config.token=t.token,Q.shared().connectManager.connect(),Q.shared().connectManager.addConnectStatusListener((e,n)=>{e===Je.Connected?(console.log("è¿æ¥æå"),Q.shared().register(1e3,()=>new Tr)):console.log("è¿æ¥å¤±è´¥",n)})},Vr=()=>{Q.shared().chatManager.addMessageListener(kn)},kn=t=>{const{header:e,messageID:n,messageSeq:r,clientMsgNo:a,fromUID:c,channel:x,timestamp:l,content:N,contentType:T}=t;Or({header:{noPersist:0,redDot:e.reddot?1:0,syncOnce:0},setting:0,messageId:n,clientMsgNo:a,messageSeq:r,fromUid:c,channelId:x.channelID,channelType:x.channelType,timestamp:l,sendUserType:null,nickName:N==null?void 0:N.nickName,pic:N==null?void 0:N.pic,payload:{nickName:N==null?void 0:N.nickName,pic:N==null?void 0:N.pic,content:N==null?void 0:N.content,uid:N==null?void 0:N.uid,type:T}})},$r=(t,e,n,r)=>{const a=new xt(n,r);t.contentType=e,Q.shared().chatManager.send(t,a).then(()=>{})},zr=()=>{Q.shared().chatManager.removeMessageListener(kn),Q.shared().disconnect()};export{Tr as U,Gr as a,Kr as b,Hr as c,Vr as d,zr as e,jr as i,_r as m,$r as s,qr as u};
